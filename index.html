<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ä½œæ›²ã‚¢ãƒ—ãƒª</title>
    
    <script src="https://cdn.jsdelivr.net/npm/midi-writer-js@2.1.4/build/index.min.js"></script>
    
    <script src="https://unpkg.com/wanakana@4.0.2/umd/wanakana.min.js"></script>
</head>
<body>
<style>
        textarea {
            width: 100%;
            height: 100px;
            background: #fffaf0;
            border-bottom: solid 3px #e8e6e1;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.25);
            border-radius: 9px;
            border-top: solid 2px #1dc1d6;
        }
        .goo {
            margin-top: 10px;
            font-size:17px;
            padding: 5px 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            width: 10em;
          ã€€height:20em;
          ã€€text-align: center;
            box-shadow: -5px 5px 0px #1567C3;
            transition: .3s;
        }
        .goo:hover{
          background-position: right center;
          background-size: 300% auto;
          -webkit-animation: pulse 1s infinite;
          animation: ripple 0.75s infinite;
          color: #fff;
          box-shadow: unset;
          transform: translate(-4px,4px);
          letter-spacing: 0.20em;
          text-indent: 0.20em;
        }
        @keyframes ripple {
          0% {box-shadow: 0 0 0 0 #1B85FB;}
          70% {box-shadow: 0 0 0 10px rgb(27 133 251 / 0%);}
          100% {box-shadow: 0 0 0 0 rgb(27 133 251 / 0%);}
        }
        header {
            color: #b22222;
            height: 200px;
            width: 90%;
            background-image: repeating-linear-gradient(115deg, rgba(255, 0, 0, 1), rgba(250, 159, 21, 1) 15%, rgba(169, 255, 34, 1) 32%, rgba(93, 192, 93, 1) 46%, rgba(100, 174, 180, 1) 60%, rgba(39, 73, 238, 1) 73%, rgba(157, 37, 243, 1) 86%, rgba(255, 0, 0, 1));
            background-size: 800% 800%;
            animation: GradietionAnimation 10s ease infinite;
            color: white;
            text-align: center;
            padding: 10px;
            border-radius: 15px;
            max-width: 952px;
            margin: 0 auto;
            padding: 12px 24px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 120px;
            weigh:100%;
            font-weight: bold;
            font-size: 75px;
            box-shadow: 0 3px 4px rgba(0, 0, 0, 0.4);/*å½±*/
        }
  @keyframes GradietionAnimation { 
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
        h1 {
            font-size: 75px;
            -webkit-text-stroke: 2px #adff2f;
            text-stroke: 2px #adff2f;
            text-align: center;
            align-items: center;
            weigh:100%;
            height:100%;

  }
        .image{
            color: #d3d3d3;
  }
  
        select{
            background-color: #fff8dc;/*èƒŒæ™¯è‰²*/
            border-top: solid 4px #1dc1d6;
            box-shadow: 0 3px 4px rgba(0, 0, 0, 0.1);/*å½±*/
            font-size: 15px;
  }
        label{
            font-size: 18px;
  }
       .input{
            font-weight: normal;
            font-size:18px;
  }
       .aa{
          color:#0645ad;
         vertical-align: middle;
          box-shadow: 0 3px 4px rgba(0, 0, 0, 0.3);/*å½±*/
         height:200%;
  }
       .aaa{
                    line-height:1.5;
          font-size:15px;
  }
       .imagin{
         font-size;23px;
  }
       .hahaha{
         font-size;20px;
  }
        .number{
          font-size:15px;
          line-height:1.5;
        }
        .tempo-image{
          font-size:15px;
          line-height:1.5;
        }
        .Metronom{
          color:#1d3994;
          font-size:21px;
        }
        .important{
          color:#ff0000;
          font-weight: bold;
        }
        .sound{
          font-size:15px;
          line-height:10px;
          line-height:1.5;
        }
        .scale{
          font-size:15px;
          line-height:10px;
                    line-height:1.5;
        }
        .fonts{
          font-size:15px;
          line-height:10px;
        }
        .Alert{
          color: #ff0000;
          line-height:1.5;
        }
  body{
          line-height:2.0;
  }
          .container {
          width: 100%;
          height: 100vh;
          display: flex;
          justify-content: center;
          align-items: center;
      }
  
      .animate {
        font-size: 50px;
        font-family:sans-serif;
        text-align: center;


      }
      .animate span {
        display: inline-block;
      }

      .animate span:nth-of-type(2) {
        animation-delay: .05s;
      }
      .animate span:nth-of-type(3) {
        animation-delay: .1s;
      }
      .animate span:nth-of-type(4) {
        animation-delay: .15s;
      }
      .animate span:nth-of-type(5) {
        animation-delay: .2s;
      }
      .animate span:nth-of-type(6) {
        animation-delay: .25s;
      }
      .animate span:nth-of-type(7) {
        animation-delay: .3s;
      }
      .animate span:nth-of-type(8) {
        animation-delay: .35s;
      }
      .animate span:nth-of-type(9) {
        animation-delay: .4s;
      }
      .animate span:nth-of-type(10) {
        animation-delay: .45s;
      }
      .animate span:nth-of-type(11) {
        animation-delay: .5s;
      }
      .animate span:nth-of-type(12) {
        animation-delay: .55s;
      }

      .top-wrapper-txt span {
        opacity: 0;
        transform: translate(-150px, 0) scale(.3);
        animation: leftRight .5s forwards;
      }


      @keyframes leftRight {
        40% {
          transform: translate(50px, 0) scale(.8);
          opacity: 1;
          color: #fff;
        }

        60% {
          color: #fff;
        }

        80% {
          transform: translate(0) scale(3);
          opacity: 0;
        }

        100% {
          transform: translate(0) scale(1);
          opacity: 1;
        }
  }
        .accordion details {
        border: 1px solid #ddd;
        margin-bottom: 5px;
        vertical-align: middle;
      }

      .accordion summary {
        padding: 10px;
        background-color: #e9f5f4;
        cursor: pointer;
        height: 20px;
        vertical-align: middle;
      }

      .accordion .sound {
        vertical-align: middle;
        padding: 10px;
        }
  
      .let{
        font-size:15px;
        }
       .now{
         color:#ff0000;
         font-weight: bold;
         font-size: 25px;
  }
       .word{
         font-style: italic;
  }
  .try{
    background-color:#f5f5f5
  }
</style>
  
<header>
  <div class="container">
  <div class="animate top-wrapper-txt">
    <span>ä½œ</span><span>æ›²</span><span>ã‚¢</span><span>ãƒ—</span><span>ãƒª</span>
    </div>  
    </div>
  
</header>

    <div class="top-ttl">
<div class="textanimation">ã“ã®ã‚¢ãƒ—ãƒªã¯ã€è‹±èªã®æ–‡å­—åˆ—ã‚’æ›²ã«å¤‰æ›ã™ã‚‹ã‚¢ãƒ—ãƒªã§ã™ã€‚</div>
    </div>

<h5 class=let>æ‰‹é †ã¯ç°¡å˜ã§ã™ã€‚å§‹ã‚ã¾ã—ã‚‡ã†ã€‚</h5>
 
  
  <select id="atmosphere">
          <option>é¸æŠã—ã¦ãã ã•ã„</option>
  <option>ã¨ã¦ã‚‚æ˜ã‚‹ã„é›°å›²æ°—</option>
  <option>ã“ã‚Œã‹ã‚‰é ‘å¼µã‚ŠãŸã„ã¨ã</option>
  <option>æ‚²ã—ã„é›°å›²æ°—</option>
  <option>æ€’ã£ã¦ã„ã‚‹é›°å›²æ°—</option>
  </select>
  <a href="#inputting">ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆå…¥åŠ›ã¸ã‚¹ã‚­ãƒƒãƒ—</a>

   <br>
  
  <label for="waveform">â‘ éŸ³è‰²ã‚’é¸æŠã—ã¦ãã ã•ã„</label>
      <select id="waveform">
    <option value="sine">é¸æŠã—ã¦ãã ã•ã„</option>
        <option value="sine">ã‚µã‚¤ãƒ³æ³¢</option>
    <option value="square">çŸ©å½¢æ³¢</option>
    <option value="sawtooth">ã®ã“ãã‚Šæ³¢</option>
    <option value="triangle">ä¸‰è§’æ³¢</option>
    <option value="piano">ãƒ”ã‚¢ãƒ</option>
    <option value="violin">ãƒã‚¤ã‚ªãƒªãƒ³</option>
    <option value="trumpet">ãƒˆãƒ©ãƒ³ãƒšãƒƒãƒˆ</option>
    <option value="flute">ãƒ•ãƒ«ãƒ¼ãƒˆ</option>
    <option value="clarinet">ã‚¯ãƒ©ãƒªãƒãƒƒãƒˆ</option>
  </select>
        <div class="accordion">
  <details name="test" class=shine>
<summary class=aa>è©³ç´°æƒ…å ±<span class=Oh>ã€€(ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯)</span></summary>
    <div class=sound>
      <h3 class=imagin>éŸ³ã«ã¤ã„ã¦ã®èª¬æ˜</h3>
      <p><span class=class>ã‚µã‚¤ãƒ³æ³¢</span>ã¯æ˜ç­ãªéŸ³ã§ã™ã€‚é€æ˜æ„ŸãŒã‚ã‚Šã¾ã™ã€‚</p>
      <button onclick="play1()" class=try> ã‚µã‚¤ãƒ³æ³¢ã®éŸ³è‰²</button>
      
      <p><span class=class>çŸ­å½¢æ³¢</span>ã¯é‹­ã„éŸ³ã§ã™</p>
      <p class=Alert><span class=camera>ã€€</span><span class=rika><img src=https://ebipop.com/wp-content/uploads/2018/12/kiken.png width="15" height="15" alt="è­¦å‘Š"></span>çŸ­å½¢æ³¢ã¯éŸ³ãŒå¤§ãã„ã§ã™ã€‚</p>
      <button onclick="play2()" class=try> çŸ­å½¢æ³¢ã®éŸ³è‰²</button>

      <p><span class=class>ã®ã“ãã‚Šæ³¢</span>ã¯æ˜ã‚‹ã„éŸ³ã§ã™</p>
      <p class=Alert><span class=camera>ã€€</span><span class=rika><img src=https://ebipop.com/wp-content/uploads/2018/12/kiken.png width="15" height="15" alt="è­¦å‘Š"></span>ã®ã“ãã‚Šæ³¢ã¯éŸ³ãŒå¤§ãã„ã§ã™ã€‚</p>
      <button onclick="play3()" class=try> ã®ã“ãã‚Šæ³¢</button>

      <p><span class=class>ä¸‰è§’æ³¢</span>ã¯ã¾ã‚ã‚„ã‹ã§å„ªã—ã„éŸ³ã§ã™ã€‚</p>
      <button onclick="play4()" class=try> ä¸‰è§’æ³¢ã®éŸ³è‰²</button>
      
       <br>
      <p>éŸ³ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯äººã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚ã¾ã‚è‰²ã€…è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
         </div>
</details>

  
<br>
  
  <label for="scaleType">â‘¡éŸ³éšã®ç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„</label>
<select id="scaleType">
    <option value="norml">é¸æŠã—ã¦ãã ã•ã„</option>
    <option value="normal">é•·éŸ³éš</option>
    <option value="yonanuki">ãƒ¨ãƒŠæŠœãéŸ³éš</option>
    <option value="ryukyu">ç‰çƒéŸ³éš</option> 
    <option value="zenon">å…¨éŸ³éš</option>
    <option value="yonuki">å››æŠœãéŸ³éš</option>
    <option value="roku">å››å…­æŠœãéŸ³éš</option>
    <option value="minyo">æ°‘è¬¡éŸ³éš</option>
    <option value="ritu">å¾‹éŸ³éš</option>
     <option value="wasei">å’Œå£°çš„çŸ­éŸ³éš</option>
  
</select>

          <div class="accordion">
  <details name="test">

<summary class=aa>è©³ç´°æƒ…å ±<span class=Oh>ã€€(ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯)</span></summary>
        <div class=sound>
   <div class=scale>

     <h3>éŸ³éšã«ã¤ã„ã¦ã®èª¬æ˜</h3>
<p>ã€€<span class=class>é•·éŸ³éš</span>ã¯æ˜ã‚‹ã„éŸ³éšã§ã™ã€‚ã‚ˆãèãã¨æ€ã„ã¾ã™ã€‚</p>
     <button id="sssss" class=try>é•·éŸ³éšå†ç”Ÿ</button>
     
     <p>ã€€<span class=class>ãƒ¨ãƒŠæŠœãéŸ³éš</span>ã¯æ—¥æœ¬é¢¨ã®éŸ³éšã§ã™</p>
     <button id="ddddd" class=try>ãƒ¨ãƒŠæŠœãéŸ³éšå†ç”Ÿ</button>
     
     <p>ã€€<span class=class>ç‰çƒéŸ³éš</span>ã¯æ²–ç¸„é¢¨ã®éŸ³éšã§ã™</p>
     <button id="fffff" class=try>ç‰çƒéŸ³éšå†ç”Ÿ</button>
     
     <p>ã€€<span class=class>å…¨éŸ³éŸ³éš</span>ã¯ã€Œå®‡å®™ã€ã€Œãµã‚ãµã‚æ„Ÿã€ãŒç‰¹å¾´ã§ã™</p>
     <button id="ggggg" class=try>å…¨éŸ³éŸ³éšå†ç”Ÿ</button>
     
    <p>ã€€<span class=class>å››æŠœãéŸ³éš</span>ã¯ãƒ¨ãƒŠæŠœãéŸ³éšã«å°‘ã—å½©ã‚ŠãŒã¾ã—ã„ã¦ã„ã¾ã™</p>
     <button id="hhhhh" class=try>å››æŠœãéŸ³éšå†ç”Ÿ</button>
     
     <p>ã€€<span class=class>å››å…­æŠœãéŸ³éš</span>ã¯ã¨ã¦ã‚‚ãã£ã±ã‚Šã¨æ˜ã‚‹ã„ã§ã™</p>
        <button id="jjjjj" class=try>å››å…­æŠœãéŸ³éšå†ç”Ÿ</button>
     
     <p>ã€€<span class=class>æ°‘è¬¡éŸ³éš</span>ã¯ã‚ã‚‰ã¹å”„ãªã©ã®æ—¥æœ¬æ°‘è¬¡ã§ã‚ˆãä½¿ã‚ã‚Œã¦ã„ã¾ã™</p>
     <button id="kkkkk" class=try>æ°‘è¬¡éŸ³éšå†ç”Ÿ</button>
     
     <p>ã€€<span class=class>å¾‹éŸ³éš</span>ã¯ã€Œå›ãŒä»£ã€ã®æ›²ã§ã™ã€‚</p>
     <button id="lllll" class=try>å¾‹éŸ³éšå†ç”Ÿ</button>
     
     </div>
   <br>
 <p class=class>ãƒ»éŸ³ç¨‹ã‚’æ±ºã‚ã¦ã‚‚æ›²ã®é›°å›²æ°—ã«å¤§ããªå½±éŸ¿ãŒãªã„å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚</p>
<p>ãƒ»å…¨éŸ³éšã¯10æ–‡å­—ã¾ã§ã§ã™ã€‚ã¾ã‚è‰²ã€…è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
     </div>
</details>
  
 <br> 
  
  <label for="key">â‘¢ã‚­ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„</label>
<select id="key">
  <option value="261.63">é¸æŠã—ã¦ãã ã•ã„</option>
    <option value="195.998">G3</option>
    <option value="207.652">G#3/Aâ™­3</option>
    <option value="220.000">A3</option>
    <option value="233.082">A#3/Bâ™­3</option>
    <option value="246.942">B3</option>
    <option value="261.626">C4</option>
    <option value="277.183">C#4/Dâ™­4</option>
    <option value="293.665">D4</option>
    <option value="311.127">D#4/Eâ™­4</option>
    <option value="329.628">E4</option>
    <option value="349.228">F4</option>
    <option value="369.994">F#4/Gâ™­4</option>
    <option value="391.995">G4</option>
    <option value="415.305">G#4/Aâ™­4</option>
    <option value="440.000">A4</option>
    <option value="466.164">A#4/Bâ™­4</option>
    <option value="493.883">B4 </option>
    <option value="523.251">C5 </option>
</select>
            
                <div class="accordion">
  <details name="test">
<summary class=aa>è©³ç´°æƒ…å ±<span class=Oh>ã€€(ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯)</span></summary>
          <div class=sound>
    <div class=aaa>
    <h3 class=imagin>ã‚­ãƒ¼ã®ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã®èª¬æ˜</h3>
      
    <p>ã€€<span class=class>C</span>ã¯æ˜ã‚‹ãé–‹æ”¾çš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚ä¸€èˆ¬çš„ãªã‚­ãƒ¼</p>
      <button id="11111" class=try>Cã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>C#/Dâ™­</span>ã¯æ¬„ç†±ã—ãŸé€€å»ƒçš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸</p>
       <button id="888888" class=try>C#/Dâ™­ã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>D</span>ã¯ç¥ã‚’é€£æƒ³ã•ã›ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸</p>
      <button id="222222" class=try>Dã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>D#,Eâ™­</span>ã¯è‹±é›„ã®ã‚¤ãƒ¡ãƒ¼ã‚¸</p>
       <button id="999999" class=try>D#/Eâ™­ã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>E</span>ã¯ã®ã©ã‹ãªã‚¤ãƒ¡ãƒ¼ã‚¸</p>
      <button id="333333" class=try>Eã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>F</span>ã¯Cã®æ¬¡ã«æ˜ã‚‹ã„ã‚¤ãƒ¡ãƒ¼ã‚¸</p>
      <button id="444444" class=try>Fã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>F#/Gâ™­</span>ã¯ãã‚‰ã³ã‚„ã‹ãªã‚¤ãƒ¡ãƒ¼ã‚¸</p>
       <button id="000000" class=try>F#/Gâ™­ã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>G</span>ã¯æ˜ã‚‹ãã¦å¿«æ´»ãªã‚¤ãƒ¡ãƒ¼ã‚¸</p>
      <button id="555555" class=try>Gã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>G#/Aâ™­</span>ã¯å¤§äººã£ã½ã„é«˜è²´ãªã‚¤ãƒ¡ãƒ¼ã‚¸</p>
       <button id="------" class=try>G#/Aâ™­ã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>A</span>ã¯ãã‚‰ã³ã‚„ã‹ã§æ¾„ã¿åˆ‡ã£ãŸã‚¤ãƒ¡ãƒ¼ã‚¸</p>
      <button id="666666" class=try>Aã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>A#/Bâ™­</span>ã¯æ˜ã‚‹ãè»½ã‚„ã‹ãªã‚¤ãƒ¡ãƒ¼ã‚¸</p>
       <button id="^^^^^^" class=try>A#/Bâ™­ã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      
    <p>ã€€<span class=class>B</span>ã¯é‡ã€…ã—ãå„€å¼çš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸</p>
      <button id="777777" class=try>Bã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ</button>
      </div>
    <br>
    <div class=number>

      <h3 class=imagin>ã‚­ãƒ¼ã®æ•°å­—ã®èª¬æ˜</h3>
      <p>ã€€æ•°å­—ãŒå°ã•ã„ã»ã©ä½ã„ã§ã™ã€‚C4ãŒçœŸã‚“ä¸­ã®ãƒ‰ã§ã™ã€‚<p>
      </div>
        <p><span class=danger>G3</span>åŠã³<span class=danger>C5</span>ã¯éŸ³ãŒé³´ã‚‰ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
            
    <br>
<p class=hahaha>ã¾ã‚è‰²ã€…è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
</details>
    
  </div>
<br>
  
  <label for="tempo">â‘£ãƒ†ãƒ³ãƒã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</label>
<select id="tempo">
  <option value="100">é¸æŠã—ã¦ãã ã•ã„</option>
    <option value="60">40</option>
    <option value="70">50</option>
    <option value="60">60</option>
    <option value="70">70</option>
    <option value="80">80</option>
    <option value="90">90</option>
    <option value="100">100</option>
    <option value="110">110</option>
    <option value="120">120</option>
    <option value="130">130</option>
    <option value="140">140</option>
  <option value="150">150</option>
   <option value="200">200</option>
    <option value="300">300</option>
  <option value="400">400</option>
  <option value="1000">1000</option>
  <option value="2000">2000</option>
</select>

          <div class="accordion">
  <details name="test">
<summary class=aa>è©³ç´°æƒ…å ±<span class=Oh>ã€€(ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯)</span></summary>
      <div class=sound>
    <div class=tempo-image>
      <h3 class=imagin>ãƒ†ãƒ³ãƒã®èª¬æ˜</h3>
        <p>ã€€<span class=class>40</span>,<span class=class>50</span>ã¯é‡ã€…ã—ã</p>
        <p>ã€€<span class=class>60</span>,<span class=span>70</span>ã¯ã‚†ã‚‹ã‚„ã‹ãªãƒ†ãƒ³ãƒ</p>
        <p>ã€€<span class=class>80</span>ã¯æ­©ãã‚ˆã†ãªé€Ÿã•<p>
        <p>ã€€<span class=class>90</span>,<span class=class>100</span>ã¯ä¸­ãã‚‰ã„ã®é€Ÿã•</p>
        <p>ã€€<span class=class>110</span>,<span class=class>120</span>ã¯ã‚„ã‚„é€Ÿã</p>
        <p>ã€€<span class=class>130</span>ã¯é€Ÿã</p>
        <p>ã€€<span class=class>140</span>ã¯å¿«æ´»ã«é€Ÿã</p>
      <p>ã€€<span class=class>150</span>ã¯æ¥µã‚ã¦é€Ÿã</p>
      <p>ã€€<span class=class>200</span>ã¯æ­»ã¬ã»ã©é€Ÿã</p>
       <p>ã€€<span class=class>300</span>ã¯æ°—ãŒãŠã‹ã—ã„ã»ã©é€Ÿã</p>
      <p>ã€€<span class=class>400</span>ã¯è¡¨ç¾ãŒã§ãã»ã©é€Ÿã</p>
      <p>ã€€<span class=class>1000</span>ã¯â€¦â€¦é€Ÿã</p>
      <p>ã€€<span class=class>2000</span>ã¯â€¦â€¦â€¦â€¦â€¦â€¦â€¦é€Ÿ</p>

        </div>
   <div class="slider-container">
        <label for="bpm-slider">BPM: </label>
        <input type="range" id="bpm-slider" min="40" max="2000" value="120">
        <div id="bpm-display">120 BPM</div>
    </div>
    <button id="start-stop-button" class=try>ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    
          <br>
<p>ã¾ã‚è‰²ã€…è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
        </div>
</details>

<br>
 <label for="beatType">ãƒ“ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³:</label>
<select id="beatType">
    <option value="none">ãªã—</option>
  <option value="8beat">8ãƒ“ãƒ¼ãƒˆ</option>
  <option value="16beat">16ãƒ“ãƒ¼ãƒˆ</option>
  <option value="rock">ãƒ­ãƒƒã‚¯</option>
  <option value="funk">ãƒ•ã‚¡ãƒ³ã‚¯</option>
  <option value="pop">ãƒãƒƒãƒ—</option>
  <option value="ballad">ãƒãƒ©ãƒ¼ãƒ‰</option>
  <option value="techno">ãƒ†ã‚¯ãƒ</option>
  <option value="dnb">ãƒ‰ãƒ©ãƒ ãƒ³ãƒ™ãƒ¼ã‚¹</option>
  <option value="trap">ãƒˆãƒ©ãƒƒãƒ—</option>
</select>
            
            <br>
            
<label for="inputTect" class=input id="inputting">â‘¤1ã€œ30æ–‡å­—åŠè§’ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>

            
              <details name="test">
<summary class=aa>è©³ç´°æƒ…å ±(ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯)</summary>
    <div class=fonts>
      <div class=sound>
      <h3 class=imagin>å…¥åŠ›ã«ã¤ã„ã¦ã®èª¬æ˜</h3>
<p>ãƒ»30æ–‡å­—ä»¥å†…ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚31æ–‡å­—ä»¥ä¸Šã«ãªã‚‹ã¨ä½œæ›²ã§ãã¾ã›ã‚“ã€‚</p>
<p>ãƒ»ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã®å¤§æ–‡å­—ã¨å°æ–‡å­—ã®åŒºåˆ¥ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p class=important>ãƒ»åŠè§’å…¥åŠ›ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>
            <p>ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒæ€ã„ã¤ã‹ãªã„å ´åˆã¯<a href="https://sites.google.com/gse.okayama-c.ed.jp/make-words/%E3%83%9B%E3%83%BC%E3%83%A0" target="_blank" rel="noopener noreferrer">æ–‡å­—åˆ—è‡ªå‹•ç”Ÿæˆ</a>ã‚’ã—ã¦ã¿ã¦ãã ã•ã„!!</p>
        </div>
      </div>
               
                 <h3>ğŸ¤ éŸ³å£°èªè­˜ï¼‹æ„Ÿæƒ…åˆ†æ</h3>

  <!-- è¨€èªåˆ‡æ›¿ãƒœã‚¿ãƒ³ -->
  <button id="buttonToSwitchLanguageMode">è¨€èªåˆ‡æ›¿ (æ—¥æœ¬èªï¼è‹±èª)</button>
  <br />

  <!-- éŸ³å£°èªè­˜ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ -->
  <button id="buttonToStartRecognition">éŸ³å£°èªè­˜ã‚¹ã‚¿ãƒ¼ãƒˆ</button>

  <div id="outputKanjiFullDisplay">
    ğŸˆ¶ æ¼¢å­—ã¾ã˜ã‚Šã®å‡ºåŠ›: <span id="outputKanjiTextContent">---</span>
  </div>
  <div id="outputRomajiFullDisplay">
    ğŸ”¤ ãƒ­ãƒ¼ãƒå­—å¤‰æ›: <span id="outputRomajiTextContent">---</span>
  </div>
                <div id="outputEmotionAnalysisResult">
    ğŸ’¡ æ„Ÿæƒ…åˆ†æ: <span id="emotionResultText">---</span>
  </div>
                
</details>
            
<textarea id="inputText" maxlength="400" rows="4" cols="50"></textarea>
<p class=word>ç¾åœ¨ã®æ–‡å­—æ•°: <span id="charCount" class=now>0</span>/400</p>
          
   <label>â‘¥ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã—ã‚‡ã†ã€‚</label>
            <br>
  
<button onclick="checkInput()" class=goo>éŸ³æ¥½ã‚’ç”Ÿæˆã™ã‚‹</button><br>
          <br>
     <button onclick="exportMidi()" class=goo>MIDIã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button><br>
            
            <button id="startBtn">éŒ²éŸ³é–‹å§‹</button>
  <button id="stopBtn" disabled>éŒ²éŸ³åœæ­¢</button>
            <button id="deleteBtn" disabled>éŒ²éŸ³ã‚’å‰Šé™¤</button>

  <a id="downloadLink" style="display: none;">éŒ²éŸ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a>
  <br><br>
  <audio id="audioPlayback" controls></audio>
            
<p id="warning" style="color: black;"></p>

<script>
  // MIDIãƒãƒ¼ãƒˆæƒ…å ±ã‚’ä¿å­˜ã™ã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«é…åˆ—
let midiNotes = [];
  
  // JavaScriptã® playDrumPattern é–¢æ•°ã®ä¸­èº«ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¦ãã ã•ã„

function playDrumPattern(audioContext, startTime, tempo, duration, beatType) {

  const beatPatterns = {
    "8beat":   [ "kick", "hat", "snare", "hat", "kick", "hat", "snare", "hat" ],
    "16beat":  [ "kick", "hat", "hat", "snare", "hat", "hat", "kick", "hat", "hat", "snare", "hat", "hat", "kick", "hat", "hat", "snare" ],
    "rock":    [ "crash", "kick", "snare", "hat", "kick", "hat", "snare", "hat" ],
    "funk":    [ "kick", "hat", "snare", "hat", "kick", "kick", "snare", "hat" ],
    "pop":     [ "kick", "hat", "snare", "hat", "kick", "snare", "kick", "hat" ],
    "ballad":  [ "crash", "kick", "hat", "snare", "hat", "hat", "snare", "hat" ],
    /* â–¼ã“ã“ã‹ã‚‰æ–°ã—ã„ãƒ“ãƒ¼ãƒˆã®å®šç¾©ã‚’è¿½åŠ â–¼ */
    "techno":  [ "kick", "ohat", "kick", "ohat", "kick", "ohat", "snare", "ohat" ],
    "dnb":     [ "kick", "hat", "hat", "snare", "hat", "kick", "hat", "hat", "kick", "hat", "hat", "snare", "hat", "kick", "kick", "hat" ],
    "trap":    [ "kick", "hat", "hat", "hat", "snare", "hat", "kick", "hat", "kick", "hat", "hat", "hat", "snare", "hat", "hat", "hat" ],
    /* â–²ã“ã“ã¾ã§è¿½åŠ â–² */
    "none":    []
  };

  if (!beatPatterns[beatType]) return;

  const pattern = beatPatterns[beatType];
  const steps = pattern.length;
  if (steps === 0) return;
  const interval = (60 / tempo) * 4 / steps;

  const drumGain = audioContext.createGain();
  drumGain.connect(audioContext.destination);

  let current = startTime;
  for (let i = 0; i < Math.floor(duration / interval); i++) {
    const sound = pattern[i % steps];
    switch (sound) {
      case "kick": playKick(audioContext, current, drumGain); break;
      case "snare": playSnare(audioContext, current, drumGain); break;
      case "hat": playHiHat(audioContext, current, drumGain); break;
      case "ohat": playOpenHat(audioContext, current, drumGain); break;
      case "crash": playCrash(audioContext, current, drumGain); break;
      case "tomlow": playTom(audioContext, current, drumGain, "low"); break;
      case "tomhi": playTom(audioContext, current, drumGain, "high"); break;
    }
    current += interval;
  }
}
  function playKick(audioContext, time, output) {
  const osc = audioContext.createOscillator();
  osc.type = "sine";
  osc.frequency.setValueAtTime(150, time);
  osc.frequency.exponentialRampToValueAtTime(50, time + 0.1);

  const gain = audioContext.createGain();
  gain.gain.setValueAtTime(1, time);
  gain.gain.exponentialRampToValueAtTime(0.001, time + 0.1);

  osc.connect(gain).connect(output);
  osc.start(time);
  osc.stop(time + 0.1);
}

function playSnare(audioContext, time, output) {
  const buffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.2, audioContext.sampleRate);
  const data = buffer.getChannelData(0);
  for (let i = 0; i < data.length; i++) data[i] = Math.random() * 2 - 1;

  const noise = audioContext.createBufferSource();
  noise.buffer = buffer;

  const bandpass = audioContext.createBiquadFilter();
  bandpass.type = "bandpass";
  bandpass.frequency.setValueAtTime(1800, time);

  const gain = audioContext.createGain();
  gain.gain.setValueAtTime(1, time);
  gain.gain.exponentialRampToValueAtTime(0.01, time + 0.2);

  noise.connect(bandpass).connect(gain).connect(output);
  noise.start(time);
  noise.stop(time + 0.2);
}

function playHiHat(audioContext, time, output) {
  const buffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.05, audioContext.sampleRate);
  const data = buffer.getChannelData(0);
  for (let i = 0; i < data.length; i++) data[i] = Math.random() * 2 - 1;

  const noise = audioContext.createBufferSource();
  noise.buffer = buffer;

  const highpass = audioContext.createBiquadFilter();
  highpass.type = "highpass";
  highpass.frequency.setValueAtTime(7000, time);

  const gain = audioContext.createGain();
  gain.gain.setValueAtTime(0.5, time);
  gain.gain.exponentialRampToValueAtTime(0.01, time + 0.05);

  noise.connect(highpass).connect(gain).connect(output);
  noise.start(time);
  noise.stop(time + 0.05);
}

function playOpenHat(audioContext, time, output) {
  const buffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.3, audioContext.sampleRate);
  const data = buffer.getChannelData(0);
  for (let i = 0; i < data.length; i++) data[i] = Math.random() * 2 - 1;

  const noise = audioContext.createBufferSource();
  noise.buffer = buffer;

  const highpass = audioContext.createBiquadFilter();
  highpass.type = "highpass";
  highpass.frequency.setValueAtTime(5000, time);

  const gain = audioContext.createGain();
  gain.gain.setValueAtTime(0.4, time);
  gain.gain.exponentialRampToValueAtTime(0.01, time + 0.3);

  noise.connect(highpass).connect(gain).connect(output);
  noise.start(time);
  noise.stop(time + 0.3);
}

function playCrash(audioContext, time, output) {
  const buffer = audioContext.createBuffer(1, audioContext.sampleRate * 1, audioContext.sampleRate);
  const data = buffer.getChannelData(0);
  for (let i = 0; i < data.length; i++) data[i] = Math.random() * 2 - 1;

  const noise = audioContext.createBufferSource();
  noise.buffer = buffer;

  const highpass = audioContext.createBiquadFilter();
  highpass.type = "highpass";
  highpass.frequency.setValueAtTime(4000, time);

  const gain = audioContext.createGain();
  gain.gain.setValueAtTime(1, time);
  gain.gain.exponentialRampToValueAtTime(0.01, time + 1);

  noise.connect(highpass).connect(gain).connect(output);
  noise.start(time);
  noise.stop(time + 1);
}

function playTom(audioContext, time, output, type = "low") {
  const osc = audioContext.createOscillator();
  osc.type = "sine";
  const freq = type === "low" ? 100 : 180;
  osc.frequency.setValueAtTime(freq, time);
  osc.frequency.exponentialRampToValueAtTime(freq / 2, time + 0.3);

  const gain = audioContext.createGain();
  gain.gain.setValueAtTime(0.8, time);
  gain.gain.exponentialRampToValueAtTime(0.001, time + 0.3);

  osc.connect(gain).connect(output);
  osc.start(time);
  osc.stop(time + 0.3);
}

  
  //è‡ªå‹•é¸æŠ
   document.getElementById("atmosphere").addEventListener("change", function () {
    const selectedAtmosphereOptionForUser = this.value;

    const waveformSelectionDropdownElement = document.getElementById("waveform");
    const keySelectionDropdownElementForTone = document.getElementById("key");
    const tempoSelectionDropdownElementHere = document.getElementById("tempo");
    const scaleTypeSelectionDropdownMenu = document.getElementById("scaleType");

    if (selectedAtmosphereOptionForUser === "é¸æŠã—ã¦ãã ã•ã„") {
      waveformSelectionDropdownElement.selectedIndex = 0;
      keySelectionDropdownElementForTone.selectedIndex = 0;
      tempoSelectionDropdownElementHere.selectedIndex = 0;
      scaleTypeSelectionDropdownMenu.selectedIndex = 0;
      return;
    }

    switch (selectedAtmosphereOptionForUser) {
      case "ã¨ã¦ã‚‚æ˜ã‚‹ã„é›°å›²æ°—":
        waveformSelectionDropdownElement.value = "square"; // çŸ©å½¢æ³¢
        keySelectionDropdownElementForTone.value = "391.995"; // G4
        tempoSelectionDropdownElementHere.value = "120";
        scaleTypeSelectionDropdownMenu.value = "normal"; // é•·éŸ³éš
        break;
      case "ã“ã‚Œã‹ã‚‰é ‘å¼µã‚ŠãŸã„ã¨ã":
        waveformSelectionDropdownElement.value = "sawtooth"; // ã®ã“ãã‚Šæ³¢
        keySelectionDropdownElementForTone.value = "493.883"; // B4
        tempoSelectionDropdownElementHere.value = "150";
        scaleTypeSelectionDropdownMenu.value = "zenon"; // å…¨éŸ³éš
        break;
      case "æ‚²ã—ã„é›°å›²æ°—":
        waveformSelectionDropdownElement.value = "triangle"; // ä¸‰è§’æ³¢
        keySelectionDropdownElementForTone.value = "329.628"; // E4
        tempoSelectionDropdownElementHere.value = "70";
        scaleTypeSelectionDropdownMenu.value = "wasei"; // å’Œå£°çš„çŸ­éŸ³éš
        break;
      case "æ€’ã£ã¦ã„ã‚‹é›°å›²æ°—":
        waveformSelectionDropdownElement.value = "sawtooth"; // ã®ã“ãã‚Šæ³¢
        keySelectionDropdownElementForTone.value = "369.994"; // F#4/Gâ™­4
        tempoSelectionDropdownElementHere.value = "140";
        scaleTypeSelectionDropdownMenu.value = "wasei"; // å’Œå£°çš„çŸ­éŸ³éš
        break;
    }
  });
  
  
  //éŸ³å£°å…¥åŠ›ãƒ»æ„Ÿæƒ…åˆ†æ
     const buttonToStartRecognition = document.getElementById('buttonToStartRecognition');
    const buttonToSwitchLanguageMode = document.getElementById('buttonToSwitchLanguageMode');
    const outputKanjiTextContent = document.getElementById('outputKanjiTextContent');
    const outputRomajiTextContent = document.getElementById('outputRomajiTextContent');
    const inputText = document.getElementById('inputText');
    const emotionResultText = document.getElementById('emotionResultText');

    const SpeechRecognitionClassAlias = window.SpeechRecognition || window.webkitSpeechRecognition;

    if (!SpeechRecognitionClassAlias) {
      alert('ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°èªè­˜ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚Google Chromeã‚’ä½¿ã£ã¦ãã ã•ã„ã€‚');
    } else {
      const recognitionObjectForSpeechInput = new SpeechRecognitionClassAlias();

      let currentRecognitionLanguageMode = 'ja-JP';
      recognitionObjectForSpeechInput.lang = currentRecognitionLanguageMode;
      recognitionObjectForSpeechInput.interimResults = false;

      // è¨€èªåˆ‡æ›¿ãƒœã‚¿ãƒ³
      buttonToSwitchLanguageMode.addEventListener('click', () => {
        if (currentRecognitionLanguageMode === 'ja-JP') {
          currentRecognitionLanguageMode = 'en-US';
          buttonToSwitchLanguageMode.textContent = 'è¨€èªåˆ‡æ›¿ (è‹±èªï¼æ—¥æœ¬èª)';
        } else {
          currentRecognitionLanguageMode = 'ja-JP';
          buttonToSwitchLanguageMode.textContent = 'è¨€èªåˆ‡æ›¿ (æ—¥æœ¬èªï¼è‹±èª)';
        }
        recognitionObjectForSpeechInput.lang = currentRecognitionLanguageMode;
        outputKanjiTextContent.textContent = `è¨€èªãŒ${currentRecognitionLanguageMode === 'ja-JP' ? 'æ—¥æœ¬èª' : 'è‹±èª'}ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã—ãŸ`;
        outputRomajiTextContent.textContent = '';
        inputText.value = '';
        emotionResultText.textContent = '---';
      });

      // éŸ³å£°èªè­˜çµæœ
      recognitionObjectForSpeechInput.onresult = (event) => {
        const spokenRecognitionResultText = event.results[0][0].transcript;
        outputKanjiTextContent.textContent = spokenRecognitionResultText;

        let romajiOutput = spokenRecognitionResultText;

        if (currentRecognitionLanguageMode === 'ja-JP') {
          const kana = wanakana.toKana(spokenRecognitionResultText);
          romajiOutput = wanakana.toRomaji(kana);
        }

        outputRomajiTextContent.textContent = romajiOutput;
        inputText.value = romajiOutput;
        analyzeEmotionFromText(romajiOutput);
      };

      recognitionObjectForSpeechInput.onerror = (event) => {
        outputKanjiTextContent.textContent = 'ã‚¨ãƒ©ãƒ¼: ' + event.error;
        outputRomajiTextContent.textContent = '';
        inputText.value = '';
        emotionResultText.textContent = '---';
      };

      buttonToStartRecognition.addEventListener('click', () => {
        outputKanjiTextContent.textContent = 'ğŸ§ èãå–ã‚Šä¸­...';
        outputRomajiTextContent.textContent = '';
        inputText.value = '';
        emotionResultText.textContent = '---';
        recognitionObjectForSpeechInput.start();
      });

      // å…¥åŠ›ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰æ„Ÿæƒ…åˆ†æ
      function analyzeEmotionFromText(text) {
        const happyWords = ['happy', 'joy', 'å¬‰', 'æ¥½', 'ã†ã‚Œ', 'ãŸã®', 'yay', 'love', 'å‹', 'åœŸæ›œ', 'æ—¥æ›œ'];
        const sadWords = ['sad', 'cry', 'å“€', 'æ³£', 'ã‹ãª', 'ã¤ã‚‰', 'æ‚²', 'å¤±', 'è² ', 'æ•—', 'æ­»', 'æœˆæ›œ', 'äº¡'];
        const angryWords = ['angry', 'æ€’', 'ã„ã‹', 'ã‚€ã‹', 'hate', 'è…¹ç«‹'];
        const fearWords = ['scared', 'ã“ã‚', 'fear', 'fright', 'å¹½éœŠ', 'ãŠã°ã‘', 'æ€–', 'éœŠ'];
        const surpriseWords = ['surprised', 'é©š', 'ãˆã£', 'ãŠã©ã‚'];

        const waveform = document.getElementById('waveform');
        const scaleType = document.getElementById('scaleType');
        const tempo = document.getElementById('tempo');

        let emotionDetected = 'ä¸­ç«‹ï¼ˆneutralï¼‰';

        const lowered = text.toLowerCase();
        if (happyWords.some(word => lowered.includes(word))) {
          emotionDetected = 'ğŸ˜Š å–œï¼ˆhappyï¼‰';
          setSelections('square', 'normal', '120');
        } else if (sadWords.some(word => lowered.includes(word))) {
          emotionDetected = 'ğŸ˜¢ å“€ï¼ˆsadï¼‰';
          setSelections('triangle', 'wasei', '70');
        } else if (angryWords.some(word => lowered.includes(word))) {
          emotionDetected = 'ğŸ˜  æ€’ï¼ˆangryï¼‰';
          setSelections('square', 'wasei', '150');
        } else if (fearWords.some(word => lowered.includes(word))) {
          emotionDetected = 'ğŸ˜¨ æï¼ˆfearï¼‰';
          setSelections('sine', 'ryukyu', '90');
        } else if (surpriseWords.some(word => lowered.includes(word))) {
          emotionDetected = 'ğŸ˜² é©šï¼ˆsurpriseï¼‰';
          setSelections('sawtooth', 'zenon', '110');
        }

        emotionResultText.textContent = emotionDetected;
      }

      // æ‰‹å‹•ã§ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã•ã‚ŒãŸå ´åˆã‚‚æ„Ÿæƒ…åˆ†æ
      inputText.addEventListener('input', () => {
        analyzeEmotionFromText(inputText.value);
      });
    }
  
  
          // éŸ³è‰²ãƒ»éŸ³éšãƒ»ãƒ†ãƒ³ãƒã®ã‚»ãƒƒãƒˆé–¢æ•°
        function setSelections(wave, scale, tempoVal) {
          waveform.value = wave;
          scaleType.value = scale;
          tempo.value = tempoVal;
        }
  
let mediaRecorder;
    let audioChunks = [];

    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const deleteBtn = document.getElementById('deleteBtn');
    const downloadLink = document.getElementById('downloadLink');
    const audioPlayback = document.getElementById('audioPlayback');

    startBtn.onclick = async () => {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      mediaRecorder = new MediaRecorder(stream);
      audioChunks = [];

      mediaRecorder.ondataavailable = event => {
        audioChunks.push(event.data);
      };

      mediaRecorder.onstop = () => {
        const blob = new Blob(audioChunks, { type: 'audio/webm' });
        const url = URL.createObjectURL(blob);
        audioPlayback.src = url;
        downloadLink.href = url;
        downloadLink.download = 'recorded_audio.webm';
        downloadLink.style.display = 'inline';
        downloadLink.textContent = 'ğŸ§ éŒ²éŸ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰';
        deleteBtn.disabled = false; // â† ã“ã“ãŒå¤§äº‹ï¼
      };

      mediaRecorder.start();
      startBtn.disabled = true;
      stopBtn.disabled = false;
      downloadLink.style.display = 'none';
      deleteBtn.disabled = true;
    };

    stopBtn.onclick = () => {
      mediaRecorder.stop();
      startBtn.disabled = false;
      stopBtn.disabled = true;
    };

    deleteBtn.onclick = () => {
      audioChunks = [];
      audioPlayback.src = "";
      downloadLink.href = "#";
      downloadLink.style.display = "none";
      deleteBtn.disabled = true;
    };
  
          const bpmSlider = document.getElementById('bpm-slider');
        const bpmDisplay = document.getElementById('bpm-display');
        const startStopButton = document.getElementById('start-stop-button');

        let audioEnglish = null; // audioContext ã‚’ audioEnglish ã«å¤‰æ›´
        let isPlaying = false;
        let nextClickTimeout = null;
        bpmSlider.addEventListener('input', () => {
        bpmDisplay.textContent = `${bpmSlider.value} BPM`;
        });

        // ãƒ¡ãƒˆãƒ­ãƒãƒ¼ãƒ ã‚’é–‹å§‹ã¾ãŸã¯åœæ­¢
        startStopButton.addEventListener('click', () => {
            if (isPlaying) {
                isPlaying = false;
                clearTimeout(nextClickTimeout);
                startStopButton.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆ";
            } else {
                if (!audioEnglish) {
                    audioEnglish = new (window.AudioContext || window.webkitAudioContext)();
                }
                isPlaying = true;
                startStopButton.textContent = "ã‚¹ãƒˆãƒƒãƒ—";
                scheduleClick();
            }
        });

        // æ¬¡ã®ã‚¯ãƒªãƒƒã‚¯éŸ³ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
        function scheduleClick() {
            if (!isPlaying) return;

            playClick();

            const bpm = bpmSlider.value;
            const interval = (60 / bpm) * 1000;

            nextClickTimeout = setTimeout(scheduleClick, interval);
        }

        // ã‚¯ãƒªãƒƒã‚¯éŸ³ã‚’å†ç”Ÿ
        function playClick() {
            if (!audioEnglish) return;

            const oscillator = audioEnglish.createOscillator();
            const gainNode = audioEnglish.createGain();

            oscillator.type = "sine";
            oscillator.frequency.setValueAtTime(1000, audioEnglish.currentTime); // å‘¨æ³¢æ•°ï¼š1000Hz
            gainNode.gain.setValueAtTime(0.5, audioEnglish.currentTime); // éŸ³é‡ï¼š0.5

            oscillator.connect(gainNode);
            gainNode.connect(audioEnglish.destination);

            oscillator.start();
            oscillator.stop(audioEnglish.currentTime + 0.1); // 0.1ç§’é–“ã®éŸ³
        }
  
  
  
  
         document.getElementById('^^^^^^').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [466.16, 523.25, 587.33, 622.25, 698.46, 783.99, 880.00, 932.33]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
          document.getElementById('------').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [415.30, 466.16, 523.25, 554.37, 622.25, 698.46, 783.99, 830.61]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
          document.getElementById('000000').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [370.00, 415.30, 466.16, 493.88, 554.37, 622.25, 698.456, 740.00]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
          document.getElementById('999999').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [311.13, 349.23, 392.00, 415.305, 466.164, 523.25, 587.33, 622.25]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
         document.getElementById('888888').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [277.19, 311.13, 349.228, 370.00, 415.30, 466.17,  523.25, 554.365]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
  
          document.getElementById('777777').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [493.88, 554.37, 622.25, 659.26, 739.99, 830.61, 932.33, 987.77]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
          document.getElementById('666666').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [440.00, 493.88, 554.37, 587.33, 659.26, 739.99, 830.61, 880.00]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
          document.getElementById('555555').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [392.00, 440.00, 493.88, 523.25, 587.33, 659.26, 739.99, 783.99]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode)
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
         document.getElementById('444444').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [349.23, 392.00, 440.00, 466.16, 523.25, 587.33, 659.26, 698.46]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
         document.getElementById('333333').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [329.63, 369.99, 415.30, 440.00, 493.88, 554.37, 622.25, 659.26]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
          document.getElementById('222222').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [293.66, 329.63, 369.99, 392.00, 440.00, 493.88, 554.37, 587.33]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
        document.getElementById('lllll').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [261.63, 293.665, 349.23, 392.00, 440.000, 523.25]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
    document.getElementById('kkkkk').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [261.63, 311.127, 349.23, 392.00, 466.164, 523.25]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
        document.getElementById('jjjjj').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [261.63, 293.66, 329.63, 392.00, 493.88, 523.25]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
         document.getElementById('hhhhh').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [261.63, 293.66, 329.63, 392.00, 440.00, 493.88, 523.25]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
          document.getElementById('ggggg').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [261.63, 293.66, 329.63, 369.994,415.305,466.164, 523.25]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
  document.getElementById('fffff').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [261.63, 329.63, 349.23, 392.00, 493.88, 523.25]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
  document.getElementById('ddddd').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [261.63, 293.66, 329.63, 392.00, 440.00, 523.25]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  
         document.getElementById('sssss').addEventListener('click', () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const frequencies = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00, 493.88, 523.25]; // C4ï½C5

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.value = freq;

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const startTime = audioContext.currentTime + index * 0.5; // 0.5ç§’ã”ã¨ã«å†ç”Ÿ
                const endTime = startTime + 0.3; // 0.4ç§’é–“å†ç”Ÿ

                oscillator.start(startTime);
                oscillator.stop(endTime);
            });
        });
  
  const wwwwwwww = window.wwwwwwww;
const acacac = new AudioContext();

const qqqqqqqq = acacac.createGain();
qqqqqqqq.gain.value = 0.1;
qqqqqqqq.connect(acacac.destination);

function play4() {
   const eeeeeeee = acacac.currentTime;
   const tttttttt = acacac.createGain();
   tttttttt.gain.value = 7;
  ã€€const rrrrrrrr = acacac.createOscillator();
   rrrrrrrr.type="triangle";
   rrrrrrrr.connect(tttttttt);
   tttttttt.connect(qqqqqqqq);
   rrrrrrrr.start(eeeeeeee);
   rrrrrrrr.stop(eeeeeeee + 0.5);
}

  const wwwwwww = window.wwwwwww;
const acaca = new AudioContext();

const qqqqqqq = acaca.createGain();
qqqqqqq.gain.value = 0.1;
qqqqqqq.connect(acaca.destination);

function play3() {
   const eeeeeee = acaca.currentTime;
   const ttttttt = acaca.createGain();
   ttttttt.gain.value = 5;
   const rrrrrrr = acaca.createOscillator();
   rrrrrrr.type="sawtooth";
   rrrrrrr.connect(ttttttt);
   ttttttt.connect(qqqqqqq);
   rrrrrrr.start(eeeeeee);
   rrrrrrr.stop(eeeeeee + 0.5);
}

  const wwwwww = window.wwwwww;
const acac = new AudioContext();

const qqqqqq = acac.createGain();
qqqqqq.gain.value = 0.1;
qqqqqq.connect(acac.destination);

function play2() {
   const eeeeee = acac.currentTime;
   const tttttt = acac.createGain();
   tttttt.gain.value = 5;
   const rrrrrr = acac.createOscillator();
   rrrrrr.type="square";
   rrrrrr.connect(tttttt);
   tttttt.connect(qqqqqq);
   rrrrrr.start(eeeeee);
   rrrrrr.stop(eeeeee + 0.5);
}

  const wwwww = window.wwwww;
const aca = new AudioContext();

const qqqqq = aca.createGain();
qqqqq.gain.value = 0.1;
qqqqq.connect(aca.destination);

function play1() {
   const eeeee = aca.currentTime;
   const ttttt = aca.createGain();
   ttttt.gain.value = 10;
   const rrrrr = aca.createOscillator();
   rrrrr.type="sine";
   rrrrr.connect(ttttt);
   ttttt.connect(qqqqq);
   rrrrr.start(eeeee);
   rrrrr.stop(eeeee + 0.5);
}
  
  
  // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å†…ã®ã™ã¹ã¦ã®detailsè¦ç´ ã«å¯¾ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
document.querySelectorAll('.accordion details').forEach(details => {
    // detailsè¦ç´ ã®toggleã‚¤ãƒ™ãƒ³ãƒˆï¼ˆé–‹é–‰çŠ¶æ…‹ã®å¤‰æ›´ï¼‰ã‚’ç›£è¦–
    details.addEventListener('toggle', event => {
      // ç¾åœ¨ã®detailsè¦ç´ å†…ã®contentè¦ç´ ã‚’å–å¾—
      const content = details.querySelector('.sound');
      
      if (details.open) {
        // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãŒé–‹ã‹ã‚ŒãŸå ´åˆ
        const keyframes = [
          { height: '0px', opacity: 0 },  // é–‹å§‹çŠ¶æ…‹ï¼šé«˜ã•0ã€é€æ˜åº¦0
          { height: `${content.scrollHeight}px`, opacity: 1 }  // çµ‚äº†çŠ¶æ…‹ï¼šå®Ÿéš›ã®é«˜ã•ã€é€æ˜åº¦1
        ];
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
        content.animate(keyframes, {
          duration: 300,  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ï¼š300ãƒŸãƒªç§’
          fill: 'forwards'  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã‚‚æœ€çµ‚ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç¶­æŒ
        }).onfinish = () => {
          // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã€é«˜ã•ã‚’autoã«è¨­å®šã—ã¦å†…å®¹ã«åˆã‚ã›ã¦èª¿æ•´
          content.style.height = 'auto';
        };
      } else {
        // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãŒé–‰ã˜ã‚‰ã‚ŒãŸå ´åˆ
        const keyframes = [
          { height: `${content.scrollHeight}px`, opacity: 1 },  // é–‹å§‹çŠ¶æ…‹ï¼šå®Ÿéš›ã®é«˜ã•ã€é€æ˜åº¦1
          { height: '0px', opacity: 0 }  // çµ‚äº†çŠ¶æ…‹ï¼šé«˜ã•0ã€é€æ˜åº¦0
        ];
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
        content.animate(keyframes, {
          duration: 300,  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ï¼š300ãƒŸãƒªç§’
          fill: 'forwards'  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã‚‚æœ€çµ‚ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç¶­æŒ
        }).onfinish = () => {
          // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã€heightæŒ‡å®šã‚’å‰Šé™¤
          // ã“ã‚Œã«ã‚ˆã‚Šã€ãƒšãƒ¼ã‚¸å†…æ¤œç´¢æ™‚ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¡¨ç¤ºå¯èƒ½ã«ãªã‚‹
          content.style.height = '';
        };
      }
    });
  });
  
    // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ–‡å­—æ•°ã‚’æ›´æ–°ã™ã‚‹
    document.getElementById("inputText").addEventListener("input", function() {
        var text = this.value;
        document.getElementById("charCount").textContent = text.length;
    });
  
    function checkInput() {
        var text = document.getElementById("inputText").value;
        var warningElement = document.getElementById("warning");
        // æ›²ã‚’ç”Ÿæˆã™ã‚‹å‰ã«è¿½åŠ ã—ãŸãƒãƒ¼ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹
midiNotes = [];

        if (text.length === 1) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã¯1æ–‡å­—ã§ã™ã€‚";
            generateMusic(true);
            return;
        }

        if (text.length === 2) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ2æ–‡å­—ã§ã™ã€‚";
            generateMusic(false, true);
            return;
        }

        if (text.length === 3) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ3æ–‡å­—ã§ã™ã€‚";
            generateMusic(false, false, true);
            return;
        }

        if (text.length === 4) {
            warningElement.textContent = " ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ4æ–‡å­—ã§ã™ã€‚";
            generateMusic(false, false, false, true);
            return;
        }

        if (text.length === 5) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ5æ–‡å­—ã§ã™ã€‚";
            generateMusic(false, false, false, false, true);
            return;
        }

        if (text.length === 6) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ6æ–‡å­—ã§ã™ã€‚";
            generateMusic(false, false, false, false, false, true);
            return;
        }

        if (text.length === 7) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ7æ–‡å­—ã§ã™ã€‚";
            generateMusicForSevenLetters();
            return;
        }

        if (text.length === 8) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ8æ–‡å­—ã§ã™ã€‚";
            generateMusicForEightLetters();
            return;
        }

        if (text.length === 9) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ9æ–‡å­—ã§ã™ã€‚";
            generateMusicForNineLetters();
            return;
        }

        if (text.length === 10) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ10æ–‡å­—ã§ã™ã€‚";
            generateMusicForTenLetters();
            return;
        }

        if (text.length === 11) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ11æ–‡å­—ã§ã™ã€‚";
            generateMusicForElevenLetters();
            return;
        }

        if (text.length === 12) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ12æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwelveLetters();
            return;
        }

        if (text.length === 13) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ13æ–‡å­—ã§ã™ã€‚";
            generateMusicForThirteenLetters();
            return;
        }
      
              if (text.length === 14) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ14æ–‡å­—ã§ã™ã€‚";
            generateMusicForFourteenLetters();
            return;
        }
                    if (text.length === 15) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ15æ–‡å­—ã§ã™ã€‚";
            generateMusicForFifthteenLetters();
            return;
        }
                   ã€€if (text.length === 16) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ16æ–‡å­—ã§ã™ã€‚";
            generateMusicForSixthteenLetters();
            return;
        }
                ã€€if (text.length === 17) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ17æ–‡å­—ã§ã™ã€‚";
            generateMusicForSeventeenLetters();
            return;
        }
                ã€€if (text.length === 18) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ18æ–‡å­—ã§ã™ã€‚";
            generateMusicForEighteenLetters();
            return;
        }
                      ã€€if (text.length === 19) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ19æ–‡å­—ã§ã™ã€‚";
            generateMusicForNineteenLetters();
            return;
        }
                            ã€€if (text.length === 20) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ20æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentyLetters();
            return;
        }
                                  ã€€if (text.length === 21) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ21æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentyOneLetters();
            return;
        }
                                  ã€€if (text.length === 22) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ22æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentyTwoLetters();
            return;
        }
                                  ã€€if (text.length === 23) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ23æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentyThreeLetters();
            return;
        }
                                  ã€€if (text.length === 24) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ24æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentyFourLetters();
            return;
        }
                                      ã€€if (text.length === 25) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ25æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentyFiveLetters();
            return;
        }
                                            ã€€if (text.length === 26) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ26æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentySixLetters();
            return;
        }
                                            ã€€if (text.length === 27) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ27æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentySevenLetters();
            return;
        }
                                            ã€€if (text.length === 28) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ28æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentyEightLetters();
            return;
        }
                                            ã€€if (text.length === 29) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ29æ–‡å­—ã§ã™ã€‚";
            generateMusicForTwentyNineLetters();
            return;
        }
                                               ã€€if (text.length === 30) {
            warningElement.textContent = "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆåˆ—ãŒ30æ–‡å­—ã§ã™ã€‚";
            generateMusicForThirtyLetters();
            return;
        }

         // 31æ–‡å­—ä»¥ä¸Šã®å ´åˆã®å‡¦ç†ã‚’ifæ–‡ã§è¨˜è¿°
    if (text.length > 30) {
        generateMusicForLongText();
        return;
    }
    }

    function generateMusic(isSingleLetter, isTwoLetters, isThreeLetters, isFourLetters, isFiveLetters, isSixLetters) {
        var text = document.getElementById("inputText").value;
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.63; // C4ã®å‘¨æ³¢æ•°

          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;
        var tempo = document.getElementById("tempo").value;
      
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
      //å…¨éŸ³éš
    }else if(scaleType == "zenon"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 6, 'E': 8, 'F': 10, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 6, 'N': 8,
            'O': 10, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 6, 'W': 8, 'X': 10, 'Y': 12, 'Z': 14};
      
      //å››æŠœãéŸ³éš
    }else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      //å››å…­æŠœãéŸ³éš
    } else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2};
      
   } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
        } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
      
    }else if (scaleType==="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
      
        var currentTime = audioContext.currentTime;
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        if (isSingleLetter) {
            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
            currentTime += eighthNoteTime;
ã€€
            var letter = text.charAt(0).toUpperCase();
            var letterFrequency = noteOffsets[letter] !== undefined ? baseFrequency * Math.pow(2, noteOffsets[letter] / 12) : baseFrequency;
            if (noteOffsets[letter] !== undefined) {
                playNote(audioContext, currentTime, letterFrequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            }

            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            return;
        }

        if (isTwoLetters) {
            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;

            for (var i = 0; i < 2; i++) {
                var char = text.charAt(i).toUpperCase();
                var frequency = noteOffsets[char] !== undefined ? baseFrequency * Math.pow(2, noteOffsets[char] / 12) : baseFrequency;
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            }

            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            return;
        }

        if (isThreeLetters) {
            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
            currentTime += eighthNoteTime;

            for (var i = 0; i < 3; i++) {
                var char = text.charAt(i).toUpperCase();
                var frequency = noteOffsets[char] !== undefined ? baseFrequency * Math.pow(2, noteOffsets[char] / 12) : baseFrequency;
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            }

            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            return;
        }

        if (isFourLetters) {
            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;

            for (var i = 0; i < 4; i++) {
                var char = text.charAt(i).toUpperCase();
                var duration = (i === 1 || i === 2) ? sixteenthNoteTime : eighthNoteTime;
                var frequency = noteOffsets[char] !== undefined ? baseFrequency * Math.pow(2, noteOffsets[char] / 12) : baseFrequency;
                playNote(audioContext, currentTime, frequency, duration);
                currentTime += duration;
            }

            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            return;
        }

        if (isFiveLetters) {
            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
            currentTime += eighthNoteTime;

            for (var i = 0; i < 5; i++) {
                var char = text.charAt(i).toUpperCase();
                var duration;
                if (i === 0 || i === 1) {
                    duration = eighthNoteTime;
                } else if (i === 2 || i === 3) {
                    duration = sixteenthNoteTime;
                } else {
                    duration = eighthNoteTime;
                }
                var frequency = noteOffsets[char] !== undefined ? baseFrequency * Math.pow(2, noteOffsets[char] / 12) : baseFrequency;
                playNote(audioContext, currentTime, frequency, duration);
                currentTime += duration;
            }

            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            return;
        }

        if (isSixLetters) {
            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
            currentTime += eighthNoteTime;

            for (var i = 0; i < 6; i++) {
                var char = text.charAt(i).toUpperCase();
                var duration;
                if (i === 0) {
                    duration = eighthNoteTime;
                } else if (i >= 1 && i <= 4) {
                    duration = sixteenthNoteTime;
                } else {
                    duration = eighthNoteTime;
                }
                var frequency = noteOffsets[char] !== undefined ? baseFrequency * Math.pow(2, noteOffsets[char] / 12) : baseFrequency;
                playNote(audioContext, currentTime, frequency, duration);
                currentTime += duration;
            }

            playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
            return;
        }
    }

    function generateMusicForSevenLetters() {
        var text = document.getElementById("inputText").value;
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.63; // C4ã®å‘¨æ³¢æ•°
      
          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;

        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    } else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if(scaleType == "zenon"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 6, 'E': 8, 'F': 10, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 6, 'N': 8,
            'O': 10, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 6, 'W': 8, 'X': 10, 'Y': 12, 'Z': 14};        
      
    } else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
           
                   } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
                     
    }else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;

    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // å…«åˆ†ä¼‘ç¬¦ã‚’è¿½åŠ 
        currentTime += eighthNoteTime;

        // 1æ–‡å­—ç›®ã¨2æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 0; i < 2; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            }
        }

        // 3æ–‡å­—ç›®ã€œ7æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 2; i < 7; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            }
        }

        // æœ€å¾Œã«C4ã®éŸ³ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, eighthNoteTime);
      
      
      
           //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }

    function generateMusicForEightLetters() {
        var text = document.getElementById("inputText").value;
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.63; // C4ã®å‘¨æ³¢æ•°
      
          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;

      
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    } else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    } else if(scaleType == "zenon"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 6, 'E': 8, 'F': 10, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 6, 'N': 8,
            'O': 10, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 6, 'W': 8, 'X': 10, 'Y': 12, 'Z': 14};        
      
    }else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
                   } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;

    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // 1æ–‡å­—ç›®ã¨2æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 0; i < 2; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            }
        }

        // å…«åˆ†ä¼‘ç¬¦ã‚’è¿½åŠ 
        currentTime += eighthNoteTime;

        // 3æ–‡å­—ç›®ã€œ6æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 2; i < 6; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            }
        }

        // 7æ–‡å­—ç›®ã¨8æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 6; i < 8; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            }
        }

        // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
      
      
      
           //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }

    function generateMusicForNineLetters() {
        var text = document.getElementById("inputText").value;
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.63; // C4ã®å‘¨æ³¢æ•°
      
          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;

      
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    } else if(scaleType == "zenon"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 6, 'E': 8, 'F': 10, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 6, 'N': 8,
            'O': 10, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 6, 'W': 8, 'X': 10, 'Y': 12, 'Z': 14};        
      
    } else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
      
    } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
              } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
                
    } else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;

    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // 1æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var firstChar = text.charAt(0).toUpperCase();
        if (noteOffsets[firstChar] !== undefined) {
            var firstFrequency = baseFrequency * Math.pow(2, noteOffsets[firstChar] / 12);
            playNote(audioContext, currentTime, firstFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }

        // 2æ–‡å­—ç›®ã¨3æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 1; i <= 2; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }

        // å…«åˆ†ä¼‘ç¬¦ã‚’è¿½åŠ 
        currentTime += eighthNoteTime;

        // 4æ–‡å­—ç›®ã€œ7æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 3; i <= 6; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        // 7æ–‡å­—ç›®ã¨8æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 7; i <= 8; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }

        // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
      
           //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }

    function generateMusicForTenLetters() {
        var text = document.getElementById("inputText").value;
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.63; // C4ã®å‘¨æ³¢æ•°
      
          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;

      
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    } else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    }else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if(scaleType == "zenon"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 6, 'E': 8, 'F': 10, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 6, 'N': 8,
            'O': 10, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 6, 'W': 8, 'X': 10, 'Y': 12, 'Z': 14};        
      
    }else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
                   } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;

    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // å…«åˆ†ä¼‘ç¬¦ã‚’è¿½åŠ 
        currentTime += eighthNoteTime;

        // 1ã€œ2æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 0; i < 2; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        // 3ã€œ4æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 2; i <= 3; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }

        // 5æ–‡å­—ç›®ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var fifthChar = text.charAt(4).toUpperCase();
        if (noteOffsets[fifthChar] !== undefined) {
            var fifthFrequency = baseFrequency * Math.pow(2, noteOffsets[fifthChar] / 12);
            playNote(audioContext, currentTime, fifthFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
        } else {
            currentTime += quarterNoteTime;
        }

        // 6æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var sixthChar = text.charAt(5).toUpperCase();
        if (noteOffsets[sixthChar] !== undefined) {
            var sixthFrequency = baseFrequency * Math.pow(2, noteOffsets[sixthChar] / 12);
            playNote(audioContext, currentTime, sixthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 7æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var seventhChar = text.charAt(6).toUpperCase();
        if (noteOffsets[seventhChar] !== undefined) {
            var seventhFrequency = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
            playNote(audioContext, currentTime, seventhFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }

        // 8æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var eighthChar = text.charAt(7).toUpperCase();
        if (noteOffsets[eighthChar] !== undefined) {
            var eighthFrequency = baseFrequency * Math.pow(2, noteOffsets[eighthChar] / 12);
            playNote(audioContext, currentTime, eighthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 9ã€œ10æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 8; i < 10; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
      
           //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }

  
    function generateMusicForElevenLetters() {
        var text = document.getElementById("inputText").value;
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.63; // C4ã®å‘¨æ³¢æ•°
      
          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;

      
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    } else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    } else if(scaleType == "zenon"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 6, 'E': 8, 'F': 10, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 6, 'N': 8,
            'O': 10, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 6, 'W': 8, 'X': 10, 'Y': 12, 'Z': 14};        
      
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
                   } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;

    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // å…«åˆ†ä¼‘ç¬¦ã‚’è¿½åŠ 
        currentTime += eighthNoteTime;

        // 1æ–‡å­—ç›®ã¨2æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 0; i < 2; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }

        // 3æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var thirdChar = text.charAt(2).toUpperCase();
        if (noteOffsets[thirdChar] !== undefined) {
            var thirdFrequency = baseFrequency * Math.pow(2, noteOffsets[thirdChar] / 12);
            playNote(audioContext, currentTime, thirdFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }

        // 4æ–‡å­—ç›®ã¨5æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 3; i <= 4; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }

        // 6æ–‡å­—ç›®ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var sixthChar = text.charAt(5).toUpperCase();
        if (noteOffsets[sixthChar] !== undefined) {
            var sixthFrequency = baseFrequency * Math.pow(2, noteOffsets[sixthChar] / 12);
            playNote(audioContext, currentTime, sixthFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
        } else {
            currentTime += quarterNoteTime;
        }

        // 7æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var seventhChar = text.charAt(6).toUpperCase();
        if (noteOffsets[seventhChar] !== undefined) {
            var seventhFrequency = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
            playNote(audioContext, currentTime, seventhFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 8æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var eighthChar = text.charAt(7).toUpperCase();
        if (noteOffsets[eighthChar] !== undefined) {
            var eighthFrequency = baseFrequency * Math.pow(2, noteOffsets[eighthChar] / 12);
            playNote(audioContext, currentTime, eighthFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }

        // 9æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var ninthChar = text.charAt(8).toUpperCase();
        if (noteOffsets[ninthChar] !== undefined) {
            var ninthFrequency = baseFrequency * Math.pow(2, noteOffsets[ninthChar] / 12);
            playNote(audioContext, currentTime, ninthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 10æ–‡å­—ç›®ã¨11æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 9; i < 11; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
           //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }

    function generateMusicForTwelveLetters() {
        var text = document.getElementById("inputText").value;
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.63; // C4ã®å‘¨æ³¢æ•°
      
          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;
      
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    }else if (scaleType==="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    }else if(scaleType == "zenon"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 6, 'E': 8, 'F': 10, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 6, 'N': 8,
            'O': 10, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 6, 'W': 8, 'X': 10, 'Y': 12, 'Z': 14};        
      
    } else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
                   }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;

    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // å…«åˆ†ä¼‘ç¬¦ã‚’è¿½åŠ 
        currentTime += eighthNoteTime;

        // 1ã€œ2æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 0; i < 2; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        // 3ã€œ4æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 2; i <= 3; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }

        // 5æ–‡å­—ç›®ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var fifthChar = text.charAt(4).toUpperCase();
        if (noteOffsets[fifthChar] !== undefined) {
            var fifthFrequency = baseFrequency * Math.pow(2, noteOffsets[fifthChar] / 12);
            playNote(audioContext, currentTime, fifthFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
        } else {
            currentTime += quarterNoteTime;
        }

        // 6æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var sixthChar = text.charAt(5).toUpperCase();
        if (noteOffsets[sixthChar] !== undefined) {
            var sixthFrequency = baseFrequency * Math.pow(2, noteOffsets[sixthChar] / 12);
            playNote(audioContext, currentTime, sixthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 7æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var seventhChar = text.charAt(6).toUpperCase();
        if (noteOffsets[seventhChar] !== undefined) {
            var seventhFrequency = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
            playNote(audioContext, currentTime, seventhFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }

        // 8æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var eighthChar = text.charAt(7).toUpperCase();
        if (noteOffsets[eighthChar] !== undefined) {
            var eighthFrequency = baseFrequency * Math.pow(2, noteOffsets[eighthChar] / 12);
            playNote(audioContext, currentTime, eighthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 9ã€œ10æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 8; i < 10; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }

    function generateMusicForElevenLetters() {
        var text = document.getElementById("inputText").value;
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.63; // C4ã®å‘¨æ³¢æ•°
      
          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;

      
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    }else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
                   } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;

    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // å…«åˆ†ä¼‘ç¬¦ã‚’è¿½åŠ 
        currentTime += eighthNoteTime;

        // 1æ–‡å­—ç›®ã¨2æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 0; i < 2; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }

        // 3æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var thirdChar = text.charAt(2).toUpperCase();
        if (noteOffsets[thirdChar] !== undefined) {
            var thirdFrequency = baseFrequency * Math.pow(2, noteOffsets[thirdChar] / 12);
            playNote(audioContext, currentTime, thirdFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }

        // 4æ–‡å­—ç›®ã¨5æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 3; i <= 4; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }

        // 6æ–‡å­—ç›®ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var sixthChar = text.charAt(5).toUpperCase();
        if (noteOffsets[sixthChar] !== undefined) {
            var sixthFrequency = baseFrequency * Math.pow(2, noteOffsets[sixthChar] / 12);
            playNote(audioContext, currentTime, sixthFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
        } else {
            currentTime += quarterNoteTime;
        }

        // 7æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var seventhChar = text.charAt(6).toUpperCase();
        if (noteOffsets[seventhChar] !== undefined) {
            var seventhFrequency = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
            playNote(audioContext, currentTime, seventhFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 8æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var eighthChar = text.charAt(7).toUpperCase();
        if (noteOffsets[eighthChar] !== undefined) {
            var eighthFrequency = baseFrequency * Math.pow(2, noteOffsets[eighthChar] / 12);
            playNote(audioContext, currentTime, eighthFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }

        // 9æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var ninthChar = text.charAt(8).toUpperCase();
        if (noteOffsets[ninthChar] !== undefined) {
            var ninthFrequency = baseFrequency * Math.pow(2, noteOffsets[ninthChar] / 12);
            playNote(audioContext, currentTime, ninthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 10æ–‡å­—ç›®ã¨11æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 9; i < 11; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
           //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }

    function generateMusicForTwelveLetters() {
        var text = document.getElementById("inputText").value;
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.63; // C4ã®å‘¨æ³¢æ•°
      
          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;

      
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    }else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    }else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
                   } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;

    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // å…«åˆ†ä¼‘ç¬¦ã‚’è¿½åŠ 
        currentTime += eighthNoteTime;

        // 1ã€œ2æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 0; i < 2; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        // 3ã€œ4æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 2; i <= 3; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }

        // 5æ–‡å­—ç›®ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var fifthChar = text.charAt(4).toUpperCase();
        if (noteOffsets[fifthChar] !== undefined) {
            var fifthFrequency = baseFrequency * Math.pow(2, noteOffsets[fifthChar] / 12);
            playNote(audioContext, currentTime, fifthFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
        } else {
            currentTime += quarterNoteTime;
        }

        // 6æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var sixthChar = text.charAt(5).toUpperCase();
        if (noteOffsets[sixthChar] !== undefined) {
            var sixthFrequency = baseFrequency * Math.pow(2, noteOffsets[sixthChar] / 12);
            playNote(audioContext, currentTime, sixthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 7æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var seventhChar = text.charAt(6).toUpperCase();
        if (noteOffsets[seventhChar] !== undefined) {
            var seventhFrequency = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
            playNote(audioContext, currentTime, seventhFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }

        // 8æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var eighthChar = text.charAt(7).toUpperCase();
        if (noteOffsets[eighthChar] !== undefined) {
            var eighthFrequency = baseFrequency * Math.pow(2, noteOffsets[eighthChar] / 12);
            playNote(audioContext, currentTime, eighthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }

        // 9ã€œ10æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 8; i < 10; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
      
           //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }

    function generateMusicForThirteenLetters() {
        var text = document.getElementById("inputText").value;
        if (text.length !== 13) {
            console.error("generateMusicForThirteenLettersé–¢æ•°ã¯13æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
            return;
        }

        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.626; // C4ã®å‘¨æ³¢æ•°
      
     // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸé«˜ã•ã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    }else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
                   } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;
    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
        var eighthNoteTime = quarterNoteTime / 2;
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;
        // 1æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var firstChar = text.charAt(0).toUpperCase();
        if (noteOffsets[firstChar] !== undefined) {
            var firstFrequency = baseFrequency * Math.pow(2, noteOffsets[firstChar] / 12);
            playNote(audioContext, currentTime, firstFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }
        // 2æ–‡å­—ç›®ãƒ»3æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 1; i <= 2; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }
        // 4æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var fourthChar = text.charAt(3).toUpperCase();
        if (noteOffsets[fourthChar] !== undefined) {
            var fourthFrequency = baseFrequency * Math.pow(2, noteOffsets[fourthChar] / 12);
            playNote(audioContext, currentTime, fourthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }
        // 5æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var fifthChar = text.charAt(4).toUpperCase();
        if (noteOffsets[fifthChar] !== undefined) {
            var fifthFrequency = baseFrequency * Math.pow(2, noteOffsets[fifthChar] / 12);
            playNote(audioContext, currentTime, fifthFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }
        // 6æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var sixthChar = text.charAt(5).toUpperCase();
        if (noteOffsets[sixthChar] !== undefined) {
            var sixthFrequency = baseFrequency * Math.pow(2, noteOffsets[sixthChar] / 12);
            playNote(audioContext, currentTime, sixthFrequency, sixteenthNoteTime);
            currentTime += sixteenthNoteTime;
        } else {
            currentTime += sixteenthNoteTime;
        }
        // 7ã€œ8æ–‡å­—ç›®ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 6; i <= 7; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, quarterNoteTime);
                currentTime += quarterNoteTime;
            } else {
                currentTime += quarterNoteTime;
            }
        }
        // 9ã€œ12æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 8; i < 12; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }
        // 13æ–‡å­—ç›®ã‚’å…«åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var thirteenthChar = text.charAt(12).toUpperCase();
        if (noteOffsets[thirteenthChar] !== undefined) {
            var thirteenthFrequency = baseFrequency * Math.pow(2, noteOffsets[thirteenthChar] / 12);
            playNote(audioContext, currentTime, thirteenthFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }
        // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
      
           //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }
  
  
      function generateMusicForFourteenLetters() {
        var text = document.getElementById("inputText").value;
        if (text.length !== 14) {
            console.error("generateMusicForFourteenLettersé–¢æ•°ã¯14æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
            return;
        }

        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.626; // C4ã®å‘¨æ³¢æ•°
      
     // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸé«˜ã•ã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    } else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
                   } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;
    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
    //å…«åˆ†éŸ³ç¬¦    
ã€€ã€€var eighthNoteTime = quarterNoteTime / 2;
ã€€//åå…­åˆ†éŸ³ç¬¦
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // 1æ–‡å­—ç›®ãƒ»2æ–‡å­—ç›®ã‚’8åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 0; i <= 1; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }
        // 3ã€œ6æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 2; i < 5; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }
        // 7æ–‡å­—ç›®ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var fifthChar = text.charAt(6).toUpperCase();
        if (noteOffsets[fifthChar] !== undefined) {
            var fifthFrequency = baseFrequency * Math.pow(2, noteOffsets[fifthChar] / 12);
            playNote(audioContext, currentTime, fifthFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
        } else {
            currentTime += quarterNoteTime;
        }
    // 8ã€œ11æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 7; i < 10; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }
       // 12æ–‡å­—ç›®ãƒ»13æ–‡å­—ç›®ã‚’8åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 11; i <= 12; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }
        // 14æ–‡å­—ç›®ã‚’8åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var fourthChar = text.charAt(13).toUpperCase();
        if (noteOffsets[fourthChar] !== undefined) {
            var fourthFrequency = baseFrequency * Math.pow(2, noteOffsets[fourthChar] / 12);
            playNote(audioContext, currentTime, fourthFrequency, eighthNoteTime);
            currentTime += eighthNoteTime;
        } else {
            currentTime += eighthNoteTime;
        }
         // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        
             //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }
    function generateMusicForFifthteenLetters() {
        var text = document.getElementById("inputText").value;
        if (text.length !== 15) {
            console.error("generateMusicForFifthteenLettersé–¢æ•°ã¯15æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
            return;
        }

        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var baseFrequency = 261.626; // C4ã®å‘¨æ³¢æ•°
      
     // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸéŸ³éšã®ç¨®é¡ï¼ˆæ™®é€šã‹ãƒ¨ãƒŠæŠœãã‹ï¼‰ã‚’å–å¾—
        var scaleType = document.getElementById("scaleType").value;
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸé«˜ã•ã‚’å–å¾—
        var selectedScale = document.getElementById("key").value;
        var baseFrequency = parseFloat(selectedScale); // é¸æŠã•ã‚ŒãŸéŸ³éšã®å‘¨æ³¢æ•°

     if (scaleType === "yonanuki") {
        // ãƒ¨ãƒŠæŠœãéŸ³éš (ä¾‹: Cãƒ¨ãƒŠæŠœãã®å ´åˆã€C, D, E, G, A)
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9};
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "ryukyu") {
        // ç‰çƒéŸ³éš (ä¾‹: Cç‰çƒéŸ³éšã®å ´åˆã€C, E, F, G, B)
        noteOffsets = {'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11};
    }else if (scaleType=="miner") {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if(scaleType == "yonuki"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O':11 , 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
      
    }else if(scaleType=="roku"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
         } else if(scaleType=="minyo"){
        noteOffsets = {'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
                   } else if(scaleType=="ritu"){
        noteOffsets = {'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        // æ™®é€šã®éŸ³éš
        noteOffsets = {'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    
        var currentTime = audioContext.currentTime;
        var tempo = document.getElementById("tempo").value;
    // ãƒ†ãƒ³ãƒã«åŸºã¥ã„ãŸå››åˆ†éŸ³ç¬¦ã®é•·ã•ã‚’è¨ˆç®—
        var quarterNoteTime = 60 / parseFloat(tempo); // ãƒ†ãƒ³ãƒã«å¿œã˜ãŸå››åˆ†éŸ³ç¬¦ã®æ™‚é–“
    //å…«åˆ†éŸ³ç¬¦    
ã€€ã€€var eighthNoteTime = quarterNoteTime / 2;
ã€€//åå…­åˆ†éŸ³ç¬¦
        var sixteenthNoteTime = quarterNoteTime / 4;

        // æœ€åˆã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
        currentTime += quarterNoteTime;

        // 1æ–‡å­—ç›®ãƒ»2æ–‡å­—ç›®ã‚’8åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 0; i <= 1; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }
        // 3ã€œ6æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 2; i < 5; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }
        // 7æ–‡å­—ç›®ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        var fifthChar = text.charAt(6).toUpperCase();
        if (noteOffsets[fifthChar] !== undefined) {
            var fifthFrequency = baseFrequency * Math.pow(2, noteOffsets[fifthChar] / 12);
            playNote(audioContext, currentTime, fifthFrequency, quarterNoteTime);
            currentTime += quarterNoteTime;
        } else {
            currentTime += quarterNoteTime;
        }
    // 8ã€œ11æ–‡å­—ç›®ã‚’16åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 7; i < 10; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
                currentTime += sixteenthNoteTime;
            } else {
                currentTime += sixteenthNoteTime;
            }
        }
       // 12æ–‡å­—ç›®ã€œ15æ–‡å­—ç›®ã‚’8åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        for (var i = 11; i <= 14; i++) {
            var char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] !== undefined) {
                var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
                playNote(audioContext, currentTime, frequency, eighthNoteTime);
                currentTime += eighthNoteTime;
            } else {
                currentTime += eighthNoteTime;
            }
        }

        }
         // æœ€å¾Œã«C4ã®éŸ³ã‚’å››åˆ†éŸ³ç¬¦ã§å†ç”Ÿ
        playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
           //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
    }

  
  function generateMusicForSixthteenLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 16) {
        console.error("generateMusicForSixthteenLettersé–¢æ•°ã¯16æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;

    for (var i = 7; i <= 10; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    for (var i = 11; i <= 14; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    var lastChar = text.charAt(15).toUpperCase();
    if (noteOffsets[lastChar] !== undefined) {
        var frequency = baseFrequency * Math.pow(2, noteOffsets[lastChar] / 12);
        playNote(audioContext, currentTime, frequency, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
         //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

  
  function generateMusicForSeventeenLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 17) {
        console.error("generateMusicForSeventeenLettersé–¢æ•°ã¯17æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;

    for (var i = 7; i <= 10; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    for (var i = 11; i <= 14; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 15; i <= 16; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
         //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForEighteenLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 18) {
        console.error("generateMusicForEighteenLettersé–¢æ•°ã¯18æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;

    for (var i = 7; i <= 10; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    for (var i = 11; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForNineteenLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 19) {
        console.error("generateMusicForNineteenLettersé–¢æ•°ã¯19æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;

    for (var i = 7; i <= 10; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    for (var i = 11; i <= 16; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    for (var i = 17; i <= 18; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);

     //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForTwentyLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 20) {
        console.error("generateMusicForTwentyLettersé–¢æ•°ã¯20æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 10; i <= 11; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(12).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 13; i <= 16; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    for (var i = 17; i <= 19; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForTwentyOneLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 21) {
        console.error("generateMusicForTwentyOneLettersé–¢æ•°ã¯21æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 10; i <= 11; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(12).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 13; i <= 18; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    for (var i = 19; i <= 20; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForTwentyTwoLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 22) {
        console.error("generateMusicForTwentyTwoLettersé–¢æ•°ã¯22æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    var seventhChar = text.charAt(10).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 11; i <= 12; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }


    for (var i = 13; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(18).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;
    var seventhChar = text.charAt(19).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, sixteenthNoteTime);
    }
    currentTime += sixteenthNoteTime;
    for (var i = 20; i <= 21; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForTwentyThreeLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 23) {
        console.error("generateMusicForTwentyThreeLettersé–¢æ•°ã¯23æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    var seventhChar = text.charAt(10).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 11; i <= 12; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }


    for (var i = 13; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(18).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;
    var seventhChar = text.charAt(19).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, sixteenthNoteTime);
    }
    currentTime += sixteenthNoteTime;

    for (var i = 20; i <= 22; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForTwentyFourLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 24) {
        console.error("generateMusicForTwentyFourLettersé–¢æ•°ã¯24æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    }else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
 else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    var seventhChar = text.charAt(10).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 11; i <= 12; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }


    for (var i = 13; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(18).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;
    var seventhChar = text.charAt(19).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, sixteenthNoteTime);
    }
    currentTime += sixteenthNoteTime;

    for (var i = 20; i <= 23; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
}

function generateMusicForTwentyFiveLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 25) {
        console.error("generateMusicForTwentyFiveLettersé–¢æ•°ã¯25æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    var seventhChar = text.charAt(10).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 11; i <= 12; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }


    for (var i = 13; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(18).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;
    var seventhChar = text.charAt(19).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, sixteenthNoteTime);
    }
    currentTime += sixteenthNoteTime;

    for (var i = 20; i <= 22; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 23; i <= 24; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForTwentySixLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 26) {
        console.error("generateMusicForTwentySixLettersé–¢æ•°ã¯26æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    var seventhChar = text.charAt(10).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 11; i <= 12; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }


    for (var i = 13; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(18).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;
    var seventhChar = text.charAt(19).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, sixteenthNoteTime);
    }
    currentTime += sixteenthNoteTime;

    for (var i = 20; i <= 21; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 22; i <= 25; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForTwentySevenLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 27) {
        console.error("generateMusicForTwentySevenLettersé–¢æ•°ã¯27æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    var seventhChar = text.charAt(10).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 11; i <= 12; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }


    for (var i = 13; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(18).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;
    var seventhChar = text.charAt(19).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, sixteenthNoteTime);
    }
    currentTime += sixteenthNoteTime;

    for (var i = 20; i <= 21; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 22; i <= 25; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(26).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForTwentyEightLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 28) {
        console.error("generateMusicForTwentyEightLettersé–¢æ•°ã¯28æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    var seventhChar = text.charAt(10).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 11; i <= 12; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }


    for (var i = 13; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(18).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;
    var seventhChar = text.charAt(19).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, sixteenthNoteTime);
    }
    currentTime += sixteenthNoteTime;

    for (var i = 20; i <= 21; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 22; i <= 25; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    for (var i = 26; i <= 27; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForTwentyNineLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 29) {
        console.error("generateMusicForTwentyNineLettersé–¢æ•°ã¯29æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    var seventhChar = text.charAt(10).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 11; i <= 12; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }


    for (var i = 13; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(18).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;
    var seventhChar = text.charAt(19).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, sixteenthNoteTime);
    }
    currentTime += sixteenthNoteTime;

    for (var i = 20; i <= 21; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 22; i <= 25; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    for (var i = 26; i <= 28; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}

function generateMusicForThirtyLetters() {
    var text = document.getElementById("inputText").value;
    if (text.length !== 30) {
        console.error("generateMusicForThirtyLettersé–¢æ•°ã¯29æ–‡å­—ã®å…¥åŠ›ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚");
        return;
    }

    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    if (scaleType === "yonanuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14,
            'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14,
            'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14,
            'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9
        };
    } else if (scaleType === "wasei") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10,
            'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    }
else if (scaleType === "ryukyu") {
        noteOffsets = {
            'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16,
            'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16,
            'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16,
            'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11
        };
    } else if (scaleType === "miner") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11,
            'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5,
            'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0,
            'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8
        };
    } else if (scaleType == "yonuki") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12,
            'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9,
            'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4,
            'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14
        };
    } else if (scaleType == "roku") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14,
            'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12,
            'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11,
            'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2
        };
    } else if (scaleType == "minyo") {
        noteOffsets = {
            'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0,
            'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3,
            'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3
        };
    } else if (scaleType == "ritu") {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0,
            'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2,
            'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5,
            'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2
        };
    } else {
        noteOffsets = {
            'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11,
            'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5,
            'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0,
            'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9
        };
    }

    var currentTime = audioContext.currentTime;
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;

    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
    currentTime += quarterNoteTime;

    for (var i = 0; i <= 1; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 2; i <= 5; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }

    var seventhChar = text.charAt(6).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, quarterNoteTime);
    }
    currentTime += quarterNoteTime;


    for (var i = 7; i <= 8; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(9).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    var seventhChar = text.charAt(10).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 11; i <= 12; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }


    for (var i = 13; i <= 17; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(18).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
currentTime += eighthNoteTime;
    var seventhChar = text.charAt(19).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, sixteenthNoteTime);
    }
    currentTime += sixteenthNoteTime;

    for (var i = 20; i <= 21; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }

    for (var i = 22; i <= 25; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, sixteenthNoteTime);
        }
        currentTime += sixteenthNoteTime;
    }
    var seventhChar = text.charAt(26).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;

    for (var i = 27; i <= 28; i++) {
        var char = text.charAt(i).toUpperCase();
        if (noteOffsets[char] !== undefined) {
            var frequency = baseFrequency * Math.pow(2, noteOffsets[char] / 12);
            playNote(audioContext, currentTime, frequency, eighthNoteTime);
        }
        currentTime += eighthNoteTime;
    }
    var seventhChar = text.charAt(29).toUpperCase();
    if (noteOffsets[seventhChar] !== undefined) {
        var freq = baseFrequency * Math.pow(2, noteOffsets[seventhChar] / 12);
        playNote(audioContext, currentTime, freq, eighthNoteTime);
    }
    currentTime += eighthNoteTime;
    playNote(audioContext, currentTime, baseFrequency, quarterNoteTime);
       //ãƒ‰ãƒ©ãƒ ã§è¿½åŠ 
      const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}
  
  function generateMusicForLongText() {
    const text = document.getElementById("inputText").value;
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // æ›²å…¨ä½“ã®éŸ³é‡ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ãƒã‚¹ã‚¿ãƒ¼ã‚²ã‚¤ãƒ³ã‚’ä½œæˆ
    const masterGain = audioContext.createGain();
    masterGain.gain.setValueAtTime(1.0, audioContext.currentTime);
    masterGain.connect(audioContext.destination);
    
    // --- ã“ã“ã‹ã‚‰: generateMusicForThirtyLettersã¨åŒæ§˜ã®è¨­å®š ---
    var scaleType = document.getElementById("scaleType").value;
    var selectedScale = document.getElementById("key").value;
    var baseFrequency = parseFloat(selectedScale);
    let noteOffsets = {};

    // noteOffsetsã®å®šç¾©ï¼ˆã”æç¤ºã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãã®ã¾ã¾ã‚³ãƒ”ãƒ¼ï¼‰
    if (scaleType === "yonanuki") {
Â  Â  Â  Â  noteOffsets = { 'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 12, 'G': 14, 'H': 0, 'I': 2, 'J': 4, 'K': 7, 'L': 9, 'M': 12, 'N': 14, 'O': 0, 'P': 2, 'Q': 4, 'R': 7, 'S': 9, 'T': 12, 'U': 14, 'V': 0, 'W': 2, 'X': 4, 'Y': 7, 'Z': 9 };
Â  Â  } else if (scaleType === "wasei") {
Â  Â  Â  Â  noteOffsets = { 'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 10, 'H': 11, 'I': 13, 'J': 14, 'K': 0, 'L': 2, 'M': 3, 'N': 5, 'O': 7, 'P': 8, 'Q': 10, 'R': 11, 'S': 13, 'T': 14, 'U': 0, 'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8 };
Â  Â  } else if (scaleType === "ryukyu") {
Â  Â  Â  Â  noteOffsets = { 'A': 0, 'B': 4, 'C': 5, 'D': 7, 'E': 11, 'F': 12, 'G': 16, 'H': 0, 'I': 4, 'J': 5, 'K': 7, 'L': 11, 'M': 12, 'N': 16, 'O': 0, 'P': 4, 'Q': 5, 'R': 7, 'S': 11, 'T': 12, 'U': 16, 'V': 0, 'W': 4, 'X': 5, 'Y': 7, 'Z': 11 };
Â  Â  } else if (scaleType === "miner") {
Â  Â  Â  Â  noteOffsets = { 'A': 0, 'B': 2, 'C': 3, 'D': 5, 'E': 7, 'F': 8, 'G': 11, 'H': 12, 'I': 14, 'J': 15, 'K': 0, 'L': 2, 'M': 3, 'N': 5, 'O': 7, 'P': 8, 'Q': 11, 'R': 12, 'S': 14, 'T': 15, 'U': 0, 'V': 2, 'W': 3, 'X': 5, 'Y': 7, 'Z': 8 };
Â  Â  } else if (scaleType == "yonuki") {
Â  Â  Â  Â  noteOffsets = { 'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 9, 'F': 11, 'G': 12, 'H': 14, 'I': 16, 'J': 0, 'K': 2, 'L': 4, 'M': 7, 'N': 9, 'O': 11, 'P': 12, 'Q': 14, 'R': 16, 'S': 0, 'T': 2, 'U': 4, 'V': 7, 'W': 9, 'X': 11, 'Y': 12, 'Z': 14 };
Â  Â  } else if (scaleType == "roku") {
Â  Â  Â  Â  noteOffsets = { 'A': 0, 'B': 2, 'C': 4, 'D': 7, 'E': 11, 'F': 12, 'G': 14, 'H': 16, 'I': 0, 'J': 2, 'K': 4, 'L': 7, 'M': 11, 'N': 12, 'O': 14, 'P': 16, 'Q': 0, 'R': 2, 'S': 4, 'T': 7, 'U': 11, 'V': 12, 'W': 14, 'X': 16, 'Y': 0, 'Z': 2 };
Â  Â  } else if (scaleType == "minyo") {
Â  Â  Â  Â  noteOffsets = { 'A': 0, 'B': 3, 'C': 5, 'D': 7, 'E': 10, 'F': 12, 'G': 0, 'H': 3, 'I': 5, 'J': 7, 'K': 10, 'L': 12, 'M': 0, 'N': 3, 'O': 5, 'P': 7, 'Q': 10, 'R': 12, 'S': 0, 'T': 3, 'U': 5, 'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 3 };
Â  Â  } else if (scaleType == "ritu") {
Â  Â  Â  Â  noteOffsets = { 'A': 0, 'B': 2, 'C': 5, 'D': 7, 'E': 9, 'F': 12, 'G': 0, 'H': 2, 'I': 5, 'J': 7, 'K': 9, 'L': 12, 'M': 0, 'N': 2, 'O': 5, 'P': 7, 'Q': 9, 'R': 12, 'S': 0, 'T': 2, 'U': 5, 'V': 7, 'W': 9, 'X': 12, 'Y': 0, 'Z': 2 };
Â  Â  } else {
Â  Â  Â  Â  noteOffsets = { 'A': 0, 'B': 2, 'C': 4, 'D': 5, 'E': 7, 'F': 9, 'G': 11, 'H': 12, 'I': 14, 'J': 16, 'K': 0, 'L': 2, 'M': 4, 'N': 5, 'O': 7, 'P': 9, 'Q': 11, 'R': 12, 'S': 14, 'T': 16, 'U': 0, 'V': 2, 'W': 4, 'X': 5, 'Y': 7, 'Z': 9 };
Â  Â  }
    
    var tempo = document.getElementById("tempo").value;
    var quarterNoteTime = 60 / parseFloat(tempo);
    var eighthNoteTime = quarterNoteTime / 2;
    var sixteenthNoteTime = quarterNoteTime / 4;
    // --- ã“ã“ã¾ã§: generateMusicForThirtyLettersã¨åŒæ§˜ã®è¨­å®š ---

      // â˜…â˜…â˜…â˜…â˜…ã€ã“ã“ã‹ã‚‰ãŒæ–°ã—ã„ãƒªã‚ºãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®šç¾©ã§ã™ã€‘â˜…â˜…â˜…â˜…â˜…
    // å„æ–‡å­—æ•°ã”ã¨ã®ãƒªã‚ºãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ä¸€å…ƒç®¡ç†
    const rhythmPatterns = {
        26: [
            eighthNoteTime, eighthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            quarterNoteTime, sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime
        ],
        27: [
            eighthNoteTime, eighthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            quarterNoteTime, sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime
        ],
        28: [
            eighthNoteTime, eighthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            quarterNoteTime, sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime
        ],
        29: [ // 28æ–‡å­—ã®ãƒªã‚ºãƒ ã‚’ãƒ™ãƒ¼ã‚¹ã«æœ€å¾Œã‚’è¿½åŠ 
            eighthNoteTime, eighthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            quarterNoteTime, sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime, eighthNoteTime
        ],
        30: [ // 29æ–‡å­—ã®ãƒªã‚ºãƒ ã‚’ãƒ™ãƒ¼ã‚¹ã«æœ€å¾Œã‚’è¿½åŠ  (å…ƒã®30æ–‡å­—ç”¨ã¨åŒã˜)
            eighthNoteTime, eighthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            quarterNoteTime, sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime, sixteenthNoteTime, eighthNoteTime, eighthNoteTime,
            sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, sixteenthNoteTime, eighthNoteTime,
            eighthNoteTime, eighthNoteTime, eighthNoteTime
        ]
    };
    // â˜…â˜…â˜…â˜…â˜…ã€ãƒªã‚ºãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®šç¾©ã¯ã“ã“ã¾ã§ã€‘â˜…â˜…â˜…â˜…â˜…

    let currentTime = audioContext.currentTime;


    // â˜…â˜…â˜…â˜…â˜…ã€ã“ã“ã‹ã‚‰ãŒè»¢èª¿ãƒ­ã‚¸ãƒƒã‚¯ã§ã™ã€‘â˜…â˜…â˜…â˜…â˜…
    // è»¢èª¿ã‚’é–‹å§‹ã™ã‚‹æ–‡å­—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¨ˆç®—
    let transpositionStartIndex;
    if (text.length > 100) {
        // 100æ–‡å­—ã‚’è¶…ãˆãŸã‚‰ã€æœ€å¾Œã®2å‰²ã‹ã‚‰è»¢èª¿
        const twentyPercent = Math.floor(text.length * 0.2);
        transpositionStartIndex = text.length - twentyPercent;
    } else if (text.length > 30) {
        // 31ï½100æ–‡å­—ãªã‚‰ã€æœ€å¾Œã®10æ–‡å­—ã‹ã‚‰è»¢èª¿
        transpositionStartIndex = text.length - 10;
    } else {
        // 30æ–‡å­—ä»¥ä¸‹ã¯è»¢èª¿ã—ãªã„
        transpositionStartIndex = text.length + 1; // åˆ°é”ã—ãªã„å€¤ã‚’è¨­å®š
    }
    // â˜…â˜…â˜…â˜…â˜…ã€è»¢èª¿ãƒ­ã‚¸ãƒƒã‚¯ã¯ã“ã“ã¾ã§ã€‘â˜…â˜…â˜…â˜…â˜…

   let currentIndex = 0;
    while (currentIndex < text.length) {
        // æ¬¡ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã®é•·ã•ã‚’26ï½30æ–‡å­—ã§ãƒ©ãƒ³ãƒ€ãƒ ã«æ±ºå®š
        const phraseLength = Math.floor(Math.random() * 5) + 26; // 26, 27, 28, 29, 30ã®ã„ãšã‚Œã‹
        const phraseEnd = Math.min(currentIndex + phraseLength, text.length);
        
        // â˜…â˜…â˜…â˜…â˜…ã€ã“ã“ãŒæ–°ã—ã„ãƒ­ã‚¸ãƒƒã‚¯ã§ã™ã€‘â˜…â˜…â˜…â˜…â˜…
        // ç¾åœ¨ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã®å®Ÿéš›ã®é•·ã•ã‚’è¨ˆç®—
        const currentPhraseActualLength = phraseEnd - currentIndex;
        // ãã®é•·ã•ã«å¯¾å¿œã™ã‚‹ãƒªã‚ºãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é¸æŠ
        const currentRhythmPattern = rhythmPatterns[currentPhraseActualLength] || rhythmPatterns[30]; // ç«¯æ•°ã§26æœªæº€ã®å ´åˆã¯30ã®ãƒªã‚ºãƒ ã‚’ä½¿ã†
        // â˜…â˜…â˜…â˜…â˜…ã€ã“ã“ã¾ã§ã€‘â˜…â˜…â˜…â˜…â˜…

        for (let i = currentIndex; i < phraseEnd; i++) {
            const char = text.charAt(i).toUpperCase();
            if (noteOffsets[char] === undefined) continue;

            let currentBaseFrequency = baseFrequency;
            if (i >= transpositionStartIndex) {
                currentBaseFrequency = baseFrequency * Math.pow(2, 1 / 12);
            }

            const frequency = currentBaseFrequency * Math.pow(2, noteOffsets[char] / 12);

            const rhythmIndex = i - currentIndex;
            const duration = currentRhythmPattern[rhythmIndex]; // é¸æŠã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰éŸ³é•·ã‚’å–å¾—

            playNote(audioContext, currentTime, frequency, duration);
            currentTime += duration;
        }
        currentIndex = phraseEnd;
    }

    // æœ€å¾Œã®éŸ³ã®ã‚­ãƒ¼ã‚’æ±ºå®šã™ã‚‹
    let finalBaseFrequency = baseFrequency;
    if (text.length > 30) {
        finalBaseFrequency = baseFrequency * Math.pow(2, 1 / 12);
    }
    
    // çµ‚äº†éŸ³
    playNote(audioContext, currentTime, finalBaseFrequency, quarterNoteTime * 4);
    currentTime += quarterNoteTime * 4;

    // ãƒ‰ãƒ©ãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å†ç”Ÿ
    const beatType = document.getElementById("beatType").value;
    const totalDuration = currentTime - audioContext.currentTime;
    playDrumPattern(audioContext, audioContext.currentTime, parseFloat(tempo), totalDuration, beatType);
}
  
function playNote(audioContext, currentTime, frequency, duration) {
  const waveform = document.getElementById("waveform").value;
  const masterGain = audioContext.createGain();
  masterGain.connect(audioContext.destination);

  let partials, gainValues, attack, decay, sustain, release, filterType, filterFreq, q;

  switch (waveform) {
    case "sine":
      partials = [1];
      gainValues = [1];
      attack = 0.01; decay = 0.1; sustain = 0.7; release = 0.3;
      filterType = "lowpass"; filterFreq = 1200; q = 1.0;
      break;
    case "square":
      partials = [1, 0.3, 0.1, 0.05];
      gainValues = [1, 0.3, 0.1, 0.05];
      attack = 0.02; decay = 0.2; sustain = 0.5; release = 0.4;
      filterType = "lowpass"; filterFreq = 1000; q = 2.0;
      break;
    case "sawtooth":
      partials = [1, 0.5, 0.25, 0.125];
      gainValues = [1, 0.5, 0.25, 0.125];
      attack = 0.01; decay = 0.15; sustain = 0.6; release = 0.35;
      filterType = "lowpass"; filterFreq = 1500; q = 1.5;
      break;
    case "triangle":
      partials = [1, 0.11, 0.04, 0.02];
      gainValues = [1, 0.11, 0.04, 0.02];
      attack = 0.03; decay = 0.25; sustain = 0.4; release = 0.5;
      filterType = "lowpass"; filterFreq = 800; q = 1.0;
      break;
    case "piano":
      partials = [1, 0.8, 0.6, 0.4, 0.2, 0.1];
      gainValues = [1, 0.7, 0.5, 0.3, 0.15, 0.05];
      attack = 0.005; decay = 0.5; sustain = 0.1; release = 0.8;
      filterType = "lowpass"; filterFreq = 2000; q = 0.8;
      break;
    case "violin":
      partials = [1, 0.6, 0.4, 0.3, 0.2, 0.15];
      gainValues = [0.8, 0.5, 0.3, 0.2, 0.1, 0.05];
      attack = 0.1; decay = 0.3; sustain = 0.7; release = 0.4;
      filterType = "highpass"; filterFreq = 500; q = 1.2;
      break;
    case "trumpet":
      partials = [1, 1.2, 0.9, 0.7, 0.5, 0.3];
      gainValues = [1, 0.8, 0.6, 0.4, 0.2, 0.1];
      attack = 0.05; decay = 0.2; sustain = 0.8; release = 0.3;
      filterType = "bandpass"; filterFreq = 1500; q = 2.5;
      break;
    case "flute":
      partials = [1, 0.5, 0.2];
      gainValues = [1, 0.4, 0.1];
      attack = 0.08; decay = 0.2; sustain = 0.6; release = 0.5;
      filterType = "lowpass"; filterFreq = 1800; q = 1.0;
      break;
    case "clarinet":
      partials = [1, 0.2, 0.05];
      gainValues = [1, 0.3, 0.1];
      attack = 0.01; decay = 0.2; sustain = 0.55; release = 0.4;
      filterType = "bandpass"; filterFreq = 1100; q = 3.0;
      break;
    default:
      partials = [1];
      gainValues = [1];
      attack = 0.01; decay = 0.1; sustain = 0.7; release = 0.3;
      filterType = "lowpass"; filterFreq = 1200; q = 1.0;
  }

  const filter = audioContext.createBiquadFilter();
  filter.type = filterType;
  filter.frequency.setValueAtTime(filterFreq, currentTime);
  filter.Q.setValueAtTime(q, currentTime);

  const envelope = audioContext.createGain();
  envelope.gain.setValueAtTime(0, currentTime);
  envelope.gain.linearRampToValueAtTime(1.0, currentTime + attack);
  envelope.gain.linearRampToValueAtTime(sustain, currentTime + attack + decay);
  envelope.gain.exponentialRampToValueAtTime(0.001, currentTime + duration + release);

  envelope.connect(filter);
  filter.connect(masterGain); 

  for (let i = 0; i < partials.length; i++) {
    const osc = audioContext.createOscillator();
    const gain = audioContext.createGain();

    osc.frequency.setValueAtTime(frequency * partials[i], currentTime);
    osc.type = "sine";
    gain.gain.setValueAtTime(gainValues[i], currentTime);

    osc.connect(gain).connect(envelope);
    osc.start(currentTime);
    osc.stop(currentTime + duration + release);
  }

  // === ã“ã“ãŒä¿®æ­£ç®‡æ‰€ã§ã™ï¼ ===
  // MIDIãƒãƒ¼ãƒˆæƒ…å ±ã‚’ã€é–¢æ•°ã®ã€Œå†…å´ã€ã§è¨˜éŒ²ã—ã¾ã™ã€‚
  const midi = Math.round(69 + 12 * Math.log2(frequency / 440));
  midiNotes.push({
      pitch: midi,
      duration: duration,
      start: currentTime - audioContext.currentTime
  });
}

// MIDIã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
function exportMidi() {
    if (midiNotes.length === 0) {
        alert("å…ˆã«æ›²ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚");
        return;
    }

    const track = new MidiWriter.Track();
    track.setTempo(parseInt(document.getElementById("tempo").value, 10));

    midiNotes.forEach(note => {
        const quarterNoteTime = 60 / parseInt(document.getElementById("tempo").value, 10);
        const ticks = (note.duration / quarterNoteTime) * 128;

        track.addEvent(new MidiWriter.NoteEvent({
            pitch: [note.pitch],
            duration: 'T' + Math.round(ticks),
            startTick: Math.round((note.start / quarterNoteTime) * 128)
        }));
    });

    const write = new MidiWriter.Writer(track);
    const dataUri = write.dataUri();

    const link = document.createElement('a');
    link.href = dataUri;
    link.download = "music.mid";
    link.click();
}
</script>
</body>
</html>
